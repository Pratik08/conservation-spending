<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Conservation funding does not track drivers of biodiversity loss</title>
  <meta name="description" content="Conservation funding does not track drivers of biodiversity loss" />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="Conservation funding does not track drivers of biodiversity loss" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Conservation funding does not track drivers of biodiversity loss" />
  <meta name="github-repo" content="vjjan91/conservation-spending" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Conservation funding does not track drivers of biodiversity loss" />
  
  <meta name="twitter:description" content="Conservation funding does not track drivers of biodiversity loss" />
  

<meta name="author" content="Vijay Ramesh1*, Jay Schoen1, Michael Levin1, Pratik Dubal2, Rochelle Thomas1, Sebastian Heilpern1, Jared Meek1, Pooja Choksi1, Don J Melnick1, Sara Kross1&quot;" />


<meta name="date" content="2020-09-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">Conservation funding does not track drivers of biodiversity loss</h1>
<p class="author"><em>Vijay Ramesh<sup>1*</sup>, Jay Schoen<sup>1</sup>, Michael Levin<sup>1</sup>, Pratik Dubal<sup>2</sup>, Rochelle Thomas<sup>1</sup>, Sebastian Heilpern<sup>1</sup>, Jared Meek<sup>1</sup>, Pooja Choksi<sup>1</sup>, Don J Melnick<sup>1</sup>, Sara Kross<sup>1</sup>"</em></p>
<p class="date"><em>2020-09-11</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#introduction"><span class="toc-section-number">0.0.1</span> Introduction</a></li>
<li><a href="#attribution"><span class="toc-section-number">0.0.2</span> Attribution</a></li>
<li><a href="#data-access"><span class="toc-section-number">0.0.3</span> Data access</a></li>
<li><a href="#data-processing"><span class="toc-section-number">0.0.4</span> Data processing</a></li>
<li><a href="#affiliations"><span class="toc-section-number">0.0.5</span> Affiliations</a></li>
<li><a href="#extraction"><span class="toc-section-number">1</span> Extraction</a><ul>
<li><a href="#grant-acquisition-and-preliminary-filtering"><span class="toc-section-number">1.1</span> Grant Acquisition and Preliminary Filtering</a></li>
<li><a href="#keyword-development"><span class="toc-section-number">1.2</span> Keyword Development</a></li>
<li><a href="#categories"><span class="toc-section-number">1.3</span> Categories</a></li>
<li><a href="#pre-processing-grants"><span class="toc-section-number">1.4</span> Pre-Processing grants</a></li>
<li><a href="#classification"><span class="toc-section-number">1.5</span> Classification</a></li>
</ul></li>
<li><a href="#filtering"><span class="toc-section-number">2</span> Post-Validation Filtering</a><ul>
<li><a href="#fixing-algorithm-errors-discovered-post-validation"><span class="toc-section-number">2.1</span> Fixing algorithm errors discovered post-validation</a></li>
<li><a href="#remove-grants-with-no-associated-dollar-amount"><span class="toc-section-number">2.2</span> Remove grants with no associated dollar amount</a></li>
<li><a href="#filtering-aquariumzoo-grants"><span class="toc-section-number">2.3</span> Filtering Aquarium/Zoo Grants</a></li>
</ul></li>
<li><a href="#multiCatFilter"><span class="toc-section-number">3</span> Multi-category Filtering</a><ul>
<li><a href="#adding-category-sum-columns"><span class="toc-section-number">3.1</span> Adding Category Sum columns</a></li>
<li><a href="#export-multi-category-file"><span class="toc-section-number">3.2</span> Export Multi-category file</a><ul>
<li><a href="#multi-category-filtering-habitat-categories"><span class="toc-section-number">3.2.1</span> Multi-category Filtering: Habitat Categories</a></li>
<li><a href="#multi-category-filtering-bio-categories"><span class="toc-section-number">3.2.2</span> Multi-category Filtering: Bio Categories</a></li>
<li><a href="#multi-category-filtering-action-categories"><span class="toc-section-number">3.2.3</span> Multi-category Filtering: Action Categories</a></li>
<li><a href="#multi-category-filtering-threat-categories"><span class="toc-section-number">3.2.4</span> Multi-category Filtering: Threat Categories</a></li>
<li><a href="#multi-category-filtering-taxa-category"><span class="toc-section-number">3.2.5</span> Multi-category Filtering: Taxa Category</a></li>
<li><a href="#export-multi-category-data-for-analysis-and-visualization"><span class="toc-section-number">3.2.6</span> Export Multi-Category Data for Analysis and Visualization</a></li>
</ul></li>
</ul></li>
<li><a href="#data-analysis-and-visualization-datavis"><span class="toc-section-number">4</span> Data Analysis and Visualization {dataVis}</a><ul>
<li><a href="#exploratory-visuals"><span class="toc-section-number">4.1</span> Exploratory Visuals</a><ul>
<li><a href="#grants-with-no-keywords"><span class="toc-section-number">4.1.1</span> Grants with No Keywords</a></li>
<li><a href="#all-grants-with-funding"><span class="toc-section-number">4.1.2</span> All Grants with Funding</a></li>
<li><a href="#bio-subset"><span class="toc-section-number">4.1.3</span> Bio Subset</a></li>
<li><a href="#money-data"><span class="toc-section-number">4.1.4</span> Money Data</a></li>
</ul></li>
<li><a href="#manuscript-figures"><span class="toc-section-number">4.2</span> Manuscript Figures</a><ul>
<li><a href="#figure-1-proportion-of-money-vs.-species-threatened"><span class="toc-section-number">4.2.1</span> Figure 1: Proportion of Money vs. Species Threatened</a></li>
<li><a href="#figure-2-amount-of-money-allocated-across-unique-threat-categories-per-year"><span class="toc-section-number">4.2.2</span> Figure 2: Amount of Money Allocated Across Unique Threat Categories per Year</a></li>
<li><a href="#figure-3-taxathreat-maxwell-comparison"><span class="toc-section-number">4.2.3</span> Figure 3: Taxa/Threat Maxwell Comparison</a></li>
<li><a href="#figure-4-network-analysis"><span class="toc-section-number">4.2.4</span> Figure 4: Network Analysis</a></li>
</ul></li>
</ul></li>
<li><a href="#figure-4-threats-network-analysis"><span class="toc-section-number">5</span> Figure 4: Threats Network Analysis</a><ul>
<li><a href="#threat-category-overlap"><span class="toc-section-number">5.1</span> Threat Category Overlap</a></li>
<li><a href="#pie-charts"><span class="toc-section-number">5.2</span> Pie Charts</a><ul>
<li><a href="#of-threats-within-threat-categories-number-of-grants-not"><span class="toc-section-number">5.2.1</span> # of Threats within Threat categories (number of grants, not $)</a></li>
</ul></li>
<li><a href="#supplemental-figures"><span class="toc-section-number">5.3</span> Supplemental Figures</a><ul>
<li><a href="#figure-s1-total-biodiversityclimate-change-grantmaking-by-top-1000-grantmakers"><span class="toc-section-number">5.3.1</span> Figure S1: Total Biodiversity/Climate Change Grantmaking by Top 1000 Grantmakers</a></li>
</ul></li>
</ul></li>
<li><a href="#rbc"><span class="toc-section-number">6</span> Rule Based Classification</a></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Conservation funding does not track drivers of biodiversity loss</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="introduction" class="section level3">
<h3><span class="header-section-number">0.0.1</span> Introduction</h3>
<p>This is the <code>bookdown</code> version of a repository that contains code and analyses associated with Ramesh et. al. (in review).</p>
</div>
<div id="attribution" class="section level3">
<h3><span class="header-section-number">0.0.2</span> Attribution</h3>
<p>Please contact the following in case of interest in the project.</p>
<ul>
<li>Vijay Ramesh (lead author)
<ul>
<li>PhD student, Columbia University</li>
</ul></li>
</ul>
</div>
<div id="data-access" class="section level3">
<h3><span class="header-section-number">0.0.3</span> Data access</h3>
<p>The data used in this work is available from…</p>
</div>
<div id="data-processing" class="section level3">
<h3><span class="header-section-number">0.0.4</span> Data processing</h3>
<p>The data processing for this project is described in the following sections. Navigate through them using the links in the sidebar.</p>
</div>
<div id="affiliations" class="section level3">
<h3><span class="header-section-number">0.0.5</span> Affiliations</h3>
<p><sup>1</sup>Department of Ecology, Evolution and Environmental Biology, Columbia University, 1200 Amsterdam Avenue, New York, NY 10027.</p>
<p><sup>2</sup>Department of Computer Science, Columbia University, New York, NY 10027.</p>
<p><sup>*</sup>Corresponding author. Email: <a href="mailto:vr2352@columbia.edu" class="email">vr2352@columbia.edu</a></p>
<!--chapter:end:index.Rmd-->
</div>
<div id="extraction" class="section level1">
<h1><span class="header-section-number">1</span> Extraction</h1>
<div id="grant-acquisition-and-preliminary-filtering" class="section level2">
<h2><span class="header-section-number">1.1</span> Grant Acquisition and Preliminary Filtering</h2>
<p>We downloaded a total of 94,000 grants from the Foundation Directory Online (now known as Candid, <a href="https://candid.org/find-funding?fcref=pg" class="uri">https://candid.org/find-funding?fcref=pg</a>) for the years 2002-2018, using the keywords biodiversity, ecology and climate change. Based on advice from Candid, we excluded grants for the years 2002, 2017 and 2018 as the data were considered to be incomplete. We chose to download data from only the top 500 grantmakers; 95.47% of the total funding granted by the top 1000 grantmakers came from the top 500 grantmakers (@ref(fig:fig-s1)). Each grant included the following information: Grantmaker, Grantmaker State, Recipient Name, Recipient City, Recipient State/Country, Year authorized, Grant Amount, Support Strategy and Description.</p>
<p>We converted all grant descriptions and keywords to a lower-case format in order to eliminate format-driven keyword mismatches. We removed all grants with descriptions such as ‘program development’, ‘operations support / general support’ as they lacked explicit information on where the funding was directed or suggested non-conservation related activities. We also removed grants with descriptions that contained any mention of galas, banquets, dinners, etc. Finally, we removed those grants whose descriptions were blank, uninformative, or indecipherable, as they lacked explicit information on where their associated funding was directed. Additional pre-processing steps were taken to remove grants with certain keywords after we began iterating over our classification; see the Pre-Processing Grants sub-category in the Grant Classification methods section below.</p>
</div>
<div id="keyword-development" class="section level2">
<h2><span class="header-section-number">1.2</span> Keyword Development</h2>
<p>We combined our taxa keywords list with our ecosystem keyword list, then added those keywords assembled by Mazor et al. 2018. We then identified and compiled the most frequent words within our database of grants and added an additional 1,000 most frequent words to our final keyword list. Several keywords were combined to form an informative n-gram keyword (e.g. ‘forest’ and ‘management’ into ‘forest management’). As such, our keyword database contained several bigram (two terms) and trigram (three terms) keyword phrases. Our final keyword list contained 4,171 terms. We used expert knowledge to assign these final keywords to our predefined categories through an iterative classification analysis.</p>
</div>
<div id="categories" class="section level2">
<h2><span class="header-section-number">1.3</span> Categories</h2>
<p>We developed an initial set of broad categories into which we would classify our grants based on the categories of Mazor et al. 2018 and a cursory review of our grant database. These broad categories include: Habitats, Threats, Actions, Biological Level, Zoo/Aquarium, Species/Ecosystem, and Taxa. Our iterative classification process inspired several additional categories to accompany our initial set, including Social Justice, Threat: Energy/Transport, Conservation Finance, and Biodiversity.</p>
</div>
<div id="pre-processing-grants" class="section level2">
<h2><span class="header-section-number">1.4</span> Pre-Processing grants</h2>
<p>Alongside our initial filtering steps, we developed several pre-processing rules to remove grants containing specific keywords from our classification. Several grants contained descriptions that would enable them to be classified into various categories despite being irrelevant to our analysis. In many cases these grants could be detected with specific keywords (i.e. ‘luncheon,’ ‘gala,’ and ‘Chihuly’) and removed from analysis. These pre-processing rules are distinct from our initial filtering steps as they were developed over the various iterations of our classification (details below).</p>
</div>
<div id="classification" class="section level2">
<h2><span class="header-section-number">1.5</span> Classification</h2>
<p>We iteratively applied a text-based classification approach to our filtered grant database. The classification cross-referenced keywords with each grant description in our grants database. Grants with descriptions that contained, verbatim, individual terms, bigrams, or trigrams present in our keyword list were identified and classified according to the category assigned to their respective keywords. A bigram or trigram keyword was only matched with a grant description if each of its components was a direct match. XX number of grants out of the total database contained keyword matches. Here we make a distinction between our broad categories (Threat, Action, Habitat, etc) and their sub-categories (threat_climate, action_area, habitat_terrestrial, etc; Table S4). If a grant description had two keyword matches within two sub-categories of the same category (e.g. threat_climate &amp; threat_energytransport), it was classified into a joint sub-category (threat_climate_energytransport). Grants that were classified into 3 or more sub-categories within a category (e.g. threat_climate &amp; threat_energytransport &amp; threat_pollution) were classified into a sub-category labeled as “other” (e.g. threat_other). This was to ensure that the amount of funding associated with a particular grant was applied to each category only once, avoiding repeat counting of the money for a grant if it were classified into multiple sub-categories. In other words, a grant’s money could only be counted once within a category. If a grant description had multiple keyword matches across several categories, it was classified into each of those categories and the full amount of funding associated with the grant was allocated to each of those categories (see Table S5). In order to test the effect of avoiding counting money multiple times within a broad category, an original dataframe with no dual sub-categories or other sub-categories was maintained (data_multi), such that all classifications performed by the algorithm would be counted. In this data set (when money was counted as many times as grant description keywords were classified), the general trends hold true, though certain categories are affected more than others.</p>
<!--chapter:end:01-extraction.Rmd-->
</div>
</div>
<div id="filtering" class="section level1">
<h1><span class="header-section-number">2</span> Post-Validation Filtering</h1>
<div id="fixing-algorithm-errors-discovered-post-validation" class="section level2">
<h2><span class="header-section-number">2.1</span> Fixing algorithm errors discovered post-validation</h2>
<p>Here we hard-coded several specific fixes to the classification that repeatedly cropped up during our validation process. All have been checked to have 0 mis-classifications.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Removing grants containing &quot;dinner&quot;</span></a>
<a class="sourceLine" id="cb1-2" title="2">dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="st">  </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(Description, <span class="st">&quot;dinner&quot;</span>) <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co"># Classifying &quot;dissemination&quot; as act_edu</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw">sum</span>(dat<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(dat)) {</a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="cf">if</span>(<span class="kw">str_detect</span>(dat<span class="op">$</span>Description[i], <span class="st">&quot;dissemination&quot;</span>) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb1-9" title="9">    dat<span class="op">$</span>cat_act_edu[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-10" title="10">  }</a>
<a class="sourceLine" id="cb1-11" title="11">}</a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">sum</span>(dat<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co"># Removing threat_energytransport classification for &quot;palm oil&quot;</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">sum</span>(dat<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb1-16" title="16"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(dat)) {</a>
<a class="sourceLine" id="cb1-17" title="17">  <span class="cf">if</span>(<span class="kw">str_detect</span>(dat<span class="op">$</span>Description[i], <span class="st">&quot;palm oil|oil-palm|oil palm&quot;</span>) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb1-18" title="18">    dat<span class="op">$</span>cat_threat_energytransport[i] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-19" title="19">  }</a>
<a class="sourceLine" id="cb1-20" title="20">}</a>
<a class="sourceLine" id="cb1-21" title="21"><span class="kw">sum</span>(dat<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co"># Removing hab_other classification for &quot;aquatic&quot; (will be freshwater/marine)</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="kw">sum</span>(dat<span class="op">$</span>cat_habitat_other)</a>
<a class="sourceLine" id="cb1-25" title="25"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(dat)) {</a>
<a class="sourceLine" id="cb1-26" title="26">  <span class="cf">if</span>(<span class="kw">str_detect</span>(dat<span class="op">$</span>Description[i], <span class="st">&quot;aquatic&quot;</span>) <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb1-27" title="27">    dat<span class="op">$</span>cat_habitat_other[i] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-28" title="28">  }</a>
<a class="sourceLine" id="cb1-29" title="29">}</a>
<a class="sourceLine" id="cb1-30" title="30"><span class="kw">sum</span>(dat<span class="op">$</span>cat_habitat_other)</a></code></pre></div>
</div>
<div id="remove-grants-with-no-associated-dollar-amount" class="section level2">
<h2><span class="header-section-number">2.2</span> Remove grants with no associated dollar amount</h2>
<p>Those grants with no funding amount recorded contributed nothing to this analysis, and were removed.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">dat<span class="fl">.1</span> &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw">drop_na</span>(Grant.Amount) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">42</span>) </a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">names</span>(dat<span class="fl">.1</span>)</a></code></pre></div>
</div>
<div id="filtering-aquariumzoo-grants" class="section level2">
<h2><span class="header-section-number">2.3</span> Filtering Aquarium/Zoo Grants</h2>
<p>Any funding from grants classified as Aquarium/Zoo, regardless of other categories it was also associated with, was limited to to the Aquarium/Zoo category. <strong>This is because…</strong></p>
<p>There was one exception to this: if classified into social justice, the the funding was counted in that category. <strong>This is because…</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(dat<span class="fl">.1</span>)){</a>
<a class="sourceLine" id="cb3-2" title="2">  <span class="cf">if</span>(dat<span class="fl">.1</span><span class="op">$</span>cat_aquarium_zoo[i]<span class="op">==</span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb3-3" title="3">    dat<span class="fl">.1</span>[i,<span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>, <span class="dv">19</span><span class="op">:</span><span class="dv">28</span>, <span class="dv">30</span><span class="op">:</span><span class="dv">42</span>)]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb3-4" title="4">  }</a>
<a class="sourceLine" id="cb3-5" title="5">}</a></code></pre></div>
<!--chapter:end:02-filtering.Rmd-->
</div>
</div>
<div id="multiCatFilter" class="section level1">
<h1><span class="header-section-number">3</span> Multi-category Filtering</h1>
<p>The code below governs the way we dealt with multiple, potentially overlapping categories on individual grants. The general format is as follows:</p>
<ol style="list-style-type: decimal">
<li>Grants with &gt;2 independent classfications (i.e. habitat_terrestrial, habitat_marine, and habitat_freshwater) are reclassified as “other” within their broader categories (i.e. habitat_other).<br />
</li>
<li>Grants with 2 independent classifications (i.e. habitat_terrestrial and habitat_marine) are classified into a separate, joint classification within their broader categories (i.e. habitat_MarineTerrestrial).<br />
</li>
<li>Those grants with shared independent and joint classifications default to the joint category described above.</li>
</ol>
<div id="adding-category-sum-columns" class="section level2">
<h2><span class="header-section-number">3.1</span> Adding Category Sum columns</h2>
<p>The above rules are built on dummy variables that take the sum of our binary classification data across the columns of each broader category.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">dat<span class="fl">.1</span> &lt;-<span class="st"> </span>dat<span class="fl">.1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Class =</span> <span class="kw">rowSums</span>(.[,<span class="dv">11</span><span class="op">:</span><span class="kw">length</span>(.)])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">rowSums</span>(.[<span class="dv">37</span><span class="op">:</span><span class="dv">42</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Act =</span> <span class="kw">rowSums</span>(.[<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Hab =</span> <span class="kw">rowSums</span>(.[<span class="kw">c</span>(<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">28</span>)])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Tax =</span> <span class="kw">rowSums</span>(.[<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Bio =</span> <span class="kw">rowSums</span>(.[<span class="dv">19</span><span class="op">:</span><span class="dv">20</span>]))</a></code></pre></div>
</div>
<div id="export-multi-category-file" class="section level2">
<h2><span class="header-section-number">3.2</span> Export Multi-category file</h2>
<p>The foundation of this multi-category dataset is exported prior to the full multi-category processing to provide a dataset more suited to the network analysis.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># Export file before category mutli-category processing for network analysis</span></a>
<a class="sourceLine" id="cb5-2" title="2">dat.<span class="fl">1.</span>multi &lt;-<span class="st"> </span>dat<span class="fl">.1</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">write_csv</span>(dat.<span class="fl">1.</span>multi, <span class="st">&quot;~/Desktop/master_output_data_analysis_v15_mutlicategories.csv&quot;</span>)</a></code></pre></div>
<div id="multi-category-filtering-habitat-categories" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Multi-category Filtering: Habitat Categories</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">hab &lt;-<span class="st"> </span>dat<span class="fl">.1</span>[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,<span class="dv">22</span><span class="op">:</span><span class="dv">28</span>)]</a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co"># Marine-Terrestrial</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_marine[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hab<span class="op">$</span>cat_habitat_terrestrial[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-6" title="6">    hab<span class="op">$</span>cat_habitat_MarineTerrestrial[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_MarineTerrestrial[i] <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-8" title="8">    hab<span class="op">$</span>cat_habitat_marine[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb6-9" title="9">    hab<span class="op">$</span>cat_habitat_terrestrial[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb6-10" title="10">  }</a>
<a class="sourceLine" id="cb6-11" title="11">}</a>
<a class="sourceLine" id="cb6-12" title="12"></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co"># Marine-Freshwater</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_marine[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hab<span class="op">$</span>cat_habitat_freshwater[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-16" title="16">    hab<span class="op">$</span>cat_habitat_FreshwaterMarine[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb6-17" title="17">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_FreshwaterMarine[i] <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-18" title="18">    hab<span class="op">$</span>cat_habitat_marine[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb6-19" title="19">    hab<span class="op">$</span>cat_habitat_freshwater[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb6-20" title="20">  }</a>
<a class="sourceLine" id="cb6-21" title="21">}</a>
<a class="sourceLine" id="cb6-22" title="22"></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co"># Freshwater-Terrestrial  </span></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb6-25" title="25">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_terrestrial[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hab<span class="op">$</span>cat_habitat_freshwater[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-26" title="26">    hab<span class="op">$</span>cat_habitat_FreshwaterTerrestrial[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb6-27" title="27">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_FreshwaterTerrestrial[i] <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-28" title="28">    hab<span class="op">$</span>cat_habitat_terrestrial[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb6-29" title="29">    hab<span class="op">$</span>cat_habitat_freshwater[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb6-30" title="30">  }</a>
<a class="sourceLine" id="cb6-31" title="31">}</a>
<a class="sourceLine" id="cb6-32" title="32"></a>
<a class="sourceLine" id="cb6-33" title="33"><span class="co">## Check</span></a>
<a class="sourceLine" id="cb6-34" title="34"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_other)</a>
<a class="sourceLine" id="cb6-35" title="35"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_terrestrial)</a>
<a class="sourceLine" id="cb6-36" title="36"></a>
<a class="sourceLine" id="cb6-37" title="37"><span class="co"># Habitat other (&gt;2 categories)</span></a>
<a class="sourceLine" id="cb6-38" title="38"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb6-39" title="39">  <span class="cf">if</span>(<span class="kw">sum</span>(hab[i,<span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">17</span>)]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb6-40" title="40">    hab<span class="op">$</span>cat_habitat_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb6-41" title="41">    hab[i, <span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">17</span>)] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb6-42" title="42">  }</a>
<a class="sourceLine" id="cb6-43" title="43">}</a>
<a class="sourceLine" id="cb6-44" title="44"></a>
<a class="sourceLine" id="cb6-45" title="45"><span class="co">## Check</span></a>
<a class="sourceLine" id="cb6-46" title="46"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_other)</a>
<a class="sourceLine" id="cb6-47" title="47"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_terrestrial)</a>
<a class="sourceLine" id="cb6-48" title="48"></a>
<a class="sourceLine" id="cb6-49" title="49"></a>
<a class="sourceLine" id="cb6-50" title="50"><span class="co"># If hab_other, no other habitat classification</span></a>
<a class="sourceLine" id="cb6-51" title="51"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(hab)){</a>
<a class="sourceLine" id="cb6-52" title="52">  <span class="cf">if</span>(hab<span class="op">$</span>cat_habitat_other[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb6-53" title="53">    hab[i,<span class="kw">c</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">15</span>,<span class="dv">17</span>)] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb6-54" title="54">  }</a>
<a class="sourceLine" id="cb6-55" title="55">}  </a>
<a class="sourceLine" id="cb6-56" title="56"></a>
<a class="sourceLine" id="cb6-57" title="57"><span class="co">## Check</span></a>
<a class="sourceLine" id="cb6-58" title="58"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_other)</a>
<a class="sourceLine" id="cb6-59" title="59"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_terrestrial)</a>
<a class="sourceLine" id="cb6-60" title="60"><span class="kw">sum</span>(dat<span class="fl">.1</span><span class="op">$</span>cat_habitat_freshwater)</a>
<a class="sourceLine" id="cb6-61" title="61"><span class="kw">sum</span>(hab<span class="op">$</span>cat_habitat_freshwater) <span class="co"># Huge change in freshwater number here, showing freshwater classified with other categories a lot</span></a>
<a class="sourceLine" id="cb6-62" title="62"></a>
<a class="sourceLine" id="cb6-63" title="63"></a>
<a class="sourceLine" id="cb6-64" title="64"><span class="co">### Join filtered habitat columns with original data</span></a>
<a class="sourceLine" id="cb6-65" title="65">data.final &lt;-<span class="st"> </span>dat<span class="fl">.1</span> </a>
<a class="sourceLine" id="cb6-66" title="66"><span class="kw">names</span>(data.final)</a>
<a class="sourceLine" id="cb6-67" title="67">data.final[,<span class="dv">22</span><span class="op">:</span><span class="dv">28</span>] &lt;-<span class="st"> </span>hab[,<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>]</a>
<a class="sourceLine" id="cb6-68" title="68"></a>
<a class="sourceLine" id="cb6-69" title="69"><span class="co"># Check</span></a>
<a class="sourceLine" id="cb6-70" title="70"><span class="kw">sum</span>(dat<span class="fl">.1</span><span class="op">$</span>cat_habitat_freshwater)</a>
<a class="sourceLine" id="cb6-71" title="71"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_habitat_freshwater)</a></code></pre></div>
</div>
<div id="multi-category-filtering-bio-categories" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Multi-category Filtering: Bio Categories</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_bio_ecosys_species =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">## Filling cells</span></a>
<a class="sourceLine" id="cb7-5" title="5"></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#test</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_bio_ecosys)</a>
<a class="sourceLine" id="cb7-8" title="8"></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb7-10" title="10">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_bio_ecosys[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_bio_species[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb7-11" title="11">    data.final<span class="op">$</span>cat_bio_ecosys_species[i]=<span class="dv">1</span></a>
<a class="sourceLine" id="cb7-12" title="12">    data.final<span class="op">$</span>cat_bio_ecosys[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb7-13" title="13">    data.final<span class="op">$</span>cat_bio_species[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb7-14" title="14">  }</a>
<a class="sourceLine" id="cb7-15" title="15">}</a>
<a class="sourceLine" id="cb7-16" title="16"></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_bio_ecosys)</a>
<a class="sourceLine" id="cb7-19" title="19"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_bio_ecosys_species)</a></code></pre></div>
</div>
<div id="multi-category-filtering-action-categories" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Multi-category Filtering: Action Categories</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">act &lt;-<span class="st"> </span>data.final[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">17</span>)]</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3">act &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sumAcross =</span> cat_act_area <span class="op">+</span><span class="st"> </span>cat_act_community <span class="op">+</span><span class="st"> </span>cat_act_edu <span class="op">+</span><span class="st"> </span>cat_act_funding <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="st">           </span>cat_act_policy <span class="op">+</span><span class="st"> </span>cat_act_research <span class="op">+</span><span class="st"> </span>cat_act_restor) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb8-7" title="7"></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co"># Checking number of grants/money for multiple action category grants</span></a>
<a class="sourceLine" id="cb8-9" title="9">tot_act &lt;-<span class="st"> </span><span class="kw">sum</span>(act<span class="op">$</span>Grant.Amount) <span class="co"># total = </span></a>
<a class="sourceLine" id="cb8-10" title="10"></a>
<a class="sourceLine" id="cb8-11" title="11">act5 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb8-13" title="13"><span class="kw">nrow</span>(act5)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb8-14" title="14"><span class="kw">sum</span>(act5<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co"># Retained 99.95% of grants, 99.98% of money</span></a>
<a class="sourceLine" id="cb8-16" title="16"></a>
<a class="sourceLine" id="cb8-17" title="17">act4 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb8-19" title="19"><span class="kw">nrow</span>(act4)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb8-20" title="20"><span class="kw">sum</span>(act4<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co"># Retained 99.46% of grants, 99.70% of money</span></a>
<a class="sourceLine" id="cb8-22" title="22"></a>
<a class="sourceLine" id="cb8-23" title="23">act3 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-24" title="24"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb8-25" title="25"><span class="kw">nrow</span>(act3)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb8-26" title="26"><span class="kw">sum</span>(act3<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb8-27" title="27"><span class="co"># Retained 97.63% of grants, 98.64% of money</span></a>
<a class="sourceLine" id="cb8-28" title="28"></a>
<a class="sourceLine" id="cb8-29" title="29">act2 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-30" title="30"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb8-31" title="31"><span class="kw">nrow</span>(act2)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb8-32" title="32"><span class="kw">sum</span>(act2<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb8-33" title="33"><span class="co"># Retained 90.97% of grants, 91.96% of money</span></a>
<a class="sourceLine" id="cb8-34" title="34"></a>
<a class="sourceLine" id="cb8-35" title="35">act1 &lt;-<span class="st"> </span>act <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-36" title="36"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-37" title="37"><span class="kw">nrow</span>(act1)<span class="op">/</span><span class="kw">nrow</span>(act)</a>
<a class="sourceLine" id="cb8-38" title="38"><span class="kw">sum</span>(act1<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_act</a>
<a class="sourceLine" id="cb8-39" title="39"><span class="co"># Retained 67.42% of grants, 67.28% of money</span></a>
<a class="sourceLine" id="cb8-40" title="40"></a>
<a class="sourceLine" id="cb8-41" title="41"></a>
<a class="sourceLine" id="cb8-42" title="42">n_actions &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb8-43" title="43">n_act_grants &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">nrow</span>(act1), </a>
<a class="sourceLine" id="cb8-44" title="44">              <span class="kw">nrow</span>(act2) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act1), </a>
<a class="sourceLine" id="cb8-45" title="45">              <span class="kw">nrow</span>(act3) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act2),</a>
<a class="sourceLine" id="cb8-46" title="46">              <span class="kw">nrow</span>(act4) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act3),</a>
<a class="sourceLine" id="cb8-47" title="47">              <span class="kw">nrow</span>(act5) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(act4))</a>
<a class="sourceLine" id="cb8-48" title="48"></a>
<a class="sourceLine" id="cb8-49" title="49">actions &lt;-<span class="st"> </span><span class="kw">data.frame</span>(n_actions, n_act_grants)</a>
<a class="sourceLine" id="cb8-50" title="50"><span class="kw">ggplot</span>(actions, <span class="kw">aes</span>(<span class="dt">x =</span> n_actions, <span class="dt">y =</span> n_act_grants)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-51" title="51"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-52" title="52"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;# Grants in Multiple Action Categories&quot;</span>)</a>
<a class="sourceLine" id="cb8-53" title="53"></a>
<a class="sourceLine" id="cb8-54" title="54"></a>
<a class="sourceLine" id="cb8-55" title="55"><span class="co">## &gt;2 category grants into (act_other)</span></a>
<a class="sourceLine" id="cb8-56" title="56"></a>
<a class="sourceLine" id="cb8-57" title="57">act_other &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-58" title="58"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_act =</span> cat_act_area <span class="op">+</span><span class="st"> </span>cat_act_community <span class="op">+</span><span class="st"> </span>cat_act_edu <span class="op">+</span><span class="st"> </span>cat_act_funding <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-59" title="59"><span class="st">           </span>cat_act_policy <span class="op">+</span><span class="st"> </span>cat_act_research <span class="op">+</span><span class="st"> </span>cat_act_restor) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-60" title="60"><span class="st">  </span><span class="kw">filter</span>(sum_act <span class="op">&gt;</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb8-61" title="61"></a>
<a class="sourceLine" id="cb8-62" title="62"></a>
<a class="sourceLine" id="cb8-63" title="63"><span class="co">## Adding 2-action categories and other</span></a>
<a class="sourceLine" id="cb8-64" title="64">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-65" title="65"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_act_area_comm =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-66" title="66">         <span class="dt">cat_act_area_edu =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-67" title="67">         <span class="dt">cat_act_area_funding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-68" title="68">         <span class="dt">cat_act_area_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-69" title="69">         <span class="dt">cat_act_area_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-70" title="70">         <span class="dt">cat_act_area_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-71" title="71">         <span class="dt">cat_act_community_edu =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-72" title="72">         <span class="dt">cat_act_community_funding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-73" title="73">         <span class="dt">cat_act_community_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-74" title="74">         <span class="dt">cat_act_community_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-75" title="75">         <span class="dt">cat_act_community_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-76" title="76">         <span class="dt">cat_act_edu_funding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-77" title="77">         <span class="dt">cat_act_edu_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-78" title="78">         <span class="dt">cat_act_edu_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-79" title="79">         <span class="dt">cat_act_edu_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-80" title="80">         <span class="dt">cat_act_funding_policy =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-81" title="81">         <span class="dt">cat_act_funding_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-82" title="82">         <span class="dt">cat_act_funding_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-83" title="83">         <span class="dt">cat_act_policy_research =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-84" title="84">         <span class="dt">cat_act_policy_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-85" title="85">         <span class="dt">cat_act_research_restor =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb8-86" title="86">         <span class="dt">cat_act_other =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb8-87" title="87"></a>
<a class="sourceLine" id="cb8-88" title="88"></a>
<a class="sourceLine" id="cb8-89" title="89"><span class="co">#### Filling Multiple Action cells ####</span></a>
<a class="sourceLine" id="cb8-90" title="90"></a>
<a class="sourceLine" id="cb8-91" title="91"><span class="co">## Other Actions (&gt;2 classifications)</span></a>
<a class="sourceLine" id="cb8-92" title="92"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-93" title="93"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb8-94" title="94"></a>
<a class="sourceLine" id="cb8-95" title="95"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)) {</a>
<a class="sourceLine" id="cb8-96" title="96">  <span class="cf">if</span>(<span class="kw">sum</span>(data.final[i,<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb8-97" title="97">    data.final<span class="op">$</span>cat_act_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb8-98" title="98">    data.final[i,<span class="dv">11</span><span class="op">:</span><span class="dv">17</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb8-99" title="99">  }</a>
<a class="sourceLine" id="cb8-100" title="100">}</a>
<a class="sourceLine" id="cb8-101" title="101"></a>
<a class="sourceLine" id="cb8-102" title="102"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-103" title="103"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb8-104" title="104"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_other) <span class="co"># matches nrow of act_other DF</span></a>
<a class="sourceLine" id="cb8-105" title="105"></a>
<a class="sourceLine" id="cb8-106" title="106"></a>
<a class="sourceLine" id="cb8-107" title="107"><span class="co">## Area + Community</span></a>
<a class="sourceLine" id="cb8-108" title="108"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-109" title="109"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-110" title="110"></a>
<a class="sourceLine" id="cb8-111" title="111"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-112" title="112">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-113" title="113">    data.final<span class="op">$</span>cat_act_area_comm[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-114" title="114">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_comm[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-115" title="115">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-116" title="116">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-117" title="117">  }</a>
<a class="sourceLine" id="cb8-118" title="118">}</a>
<a class="sourceLine" id="cb8-119" title="119"></a>
<a class="sourceLine" id="cb8-120" title="120"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-121" title="121"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-122" title="122"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_comm)</a>
<a class="sourceLine" id="cb8-123" title="123"></a>
<a class="sourceLine" id="cb8-124" title="124"></a>
<a class="sourceLine" id="cb8-125" title="125"><span class="co">## Area + Education</span></a>
<a class="sourceLine" id="cb8-126" title="126"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-127" title="127"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-128" title="128"></a>
<a class="sourceLine" id="cb8-129" title="129"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-130" title="130">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-131" title="131">    data.final<span class="op">$</span>cat_act_area_edu[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-132" title="132">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-133" title="133">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-134" title="134">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-135" title="135">  }</a>
<a class="sourceLine" id="cb8-136" title="136">}</a>
<a class="sourceLine" id="cb8-137" title="137"></a>
<a class="sourceLine" id="cb8-138" title="138"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-139" title="139"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-140" title="140"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_edu)</a>
<a class="sourceLine" id="cb8-141" title="141"></a>
<a class="sourceLine" id="cb8-142" title="142"></a>
<a class="sourceLine" id="cb8-143" title="143"><span class="co">## Area + Funding</span></a>
<a class="sourceLine" id="cb8-144" title="144"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-145" title="145"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-146" title="146"></a>
<a class="sourceLine" id="cb8-147" title="147"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-148" title="148">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-149" title="149">    data.final<span class="op">$</span>cat_act_area_funding[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-150" title="150">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-151" title="151">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-152" title="152">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-153" title="153">  }</a>
<a class="sourceLine" id="cb8-154" title="154">}</a>
<a class="sourceLine" id="cb8-155" title="155"></a>
<a class="sourceLine" id="cb8-156" title="156"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-157" title="157"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-158" title="158"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_funding)</a>
<a class="sourceLine" id="cb8-159" title="159"></a>
<a class="sourceLine" id="cb8-160" title="160"></a>
<a class="sourceLine" id="cb8-161" title="161"><span class="co">## Area + Policy</span></a>
<a class="sourceLine" id="cb8-162" title="162"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-163" title="163"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-164" title="164"></a>
<a class="sourceLine" id="cb8-165" title="165"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-166" title="166">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-167" title="167">    data.final<span class="op">$</span>cat_act_area_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-168" title="168">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-169" title="169">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-170" title="170">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-171" title="171">  }</a>
<a class="sourceLine" id="cb8-172" title="172">}</a>
<a class="sourceLine" id="cb8-173" title="173"></a>
<a class="sourceLine" id="cb8-174" title="174"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-175" title="175"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-176" title="176"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_policy)</a>
<a class="sourceLine" id="cb8-177" title="177"></a>
<a class="sourceLine" id="cb8-178" title="178"></a>
<a class="sourceLine" id="cb8-179" title="179"><span class="co">## Area + Research</span></a>
<a class="sourceLine" id="cb8-180" title="180"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-181" title="181"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-182" title="182"></a>
<a class="sourceLine" id="cb8-183" title="183"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-184" title="184">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-185" title="185">    data.final<span class="op">$</span>cat_act_area_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-186" title="186">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-187" title="187">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-188" title="188">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-189" title="189">  }</a>
<a class="sourceLine" id="cb8-190" title="190">}</a>
<a class="sourceLine" id="cb8-191" title="191"></a>
<a class="sourceLine" id="cb8-192" title="192"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-193" title="193"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-194" title="194"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_research)</a>
<a class="sourceLine" id="cb8-195" title="195"></a>
<a class="sourceLine" id="cb8-196" title="196"></a>
<a class="sourceLine" id="cb8-197" title="197"><span class="co">## Area + Restoration</span></a>
<a class="sourceLine" id="cb8-198" title="198"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-199" title="199"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-200" title="200"></a>
<a class="sourceLine" id="cb8-201" title="201"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-202" title="202">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-203" title="203">    data.final<span class="op">$</span>cat_act_area_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-204" title="204">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_area_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-205" title="205">    data.final<span class="op">$</span>cat_act_area[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-206" title="206">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-207" title="207">  }</a>
<a class="sourceLine" id="cb8-208" title="208">}</a>
<a class="sourceLine" id="cb8-209" title="209"></a>
<a class="sourceLine" id="cb8-210" title="210"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-211" title="211"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area)</a>
<a class="sourceLine" id="cb8-212" title="212"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_area_restor)</a>
<a class="sourceLine" id="cb8-213" title="213"></a>
<a class="sourceLine" id="cb8-214" title="214"></a>
<a class="sourceLine" id="cb8-215" title="215"><span class="co">## Community + Education</span></a>
<a class="sourceLine" id="cb8-216" title="216"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-217" title="217"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-218" title="218"></a>
<a class="sourceLine" id="cb8-219" title="219"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-220" title="220">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-221" title="221">    data.final<span class="op">$</span>cat_act_community_edu[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-222" title="222">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_edu[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-223" title="223">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-224" title="224">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-225" title="225">  }</a>
<a class="sourceLine" id="cb8-226" title="226">}</a>
<a class="sourceLine" id="cb8-227" title="227"></a>
<a class="sourceLine" id="cb8-228" title="228"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-229" title="229"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-230" title="230"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_edu)</a>
<a class="sourceLine" id="cb8-231" title="231"></a>
<a class="sourceLine" id="cb8-232" title="232"></a>
<a class="sourceLine" id="cb8-233" title="233"><span class="co">## Community + Funding</span></a>
<a class="sourceLine" id="cb8-234" title="234"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-235" title="235"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-236" title="236"></a>
<a class="sourceLine" id="cb8-237" title="237"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-238" title="238">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-239" title="239">    data.final<span class="op">$</span>cat_act_community_funding[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-240" title="240">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-241" title="241">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-242" title="242">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-243" title="243">  }</a>
<a class="sourceLine" id="cb8-244" title="244">}</a>
<a class="sourceLine" id="cb8-245" title="245"></a>
<a class="sourceLine" id="cb8-246" title="246"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-247" title="247"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-248" title="248"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_funding)</a>
<a class="sourceLine" id="cb8-249" title="249"></a>
<a class="sourceLine" id="cb8-250" title="250"></a>
<a class="sourceLine" id="cb8-251" title="251"><span class="co">## Community + Policy</span></a>
<a class="sourceLine" id="cb8-252" title="252"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-253" title="253"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-254" title="254"></a>
<a class="sourceLine" id="cb8-255" title="255"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-256" title="256">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-257" title="257">    data.final<span class="op">$</span>cat_act_community_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-258" title="258">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-259" title="259">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-260" title="260">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-261" title="261">  }</a>
<a class="sourceLine" id="cb8-262" title="262">}</a>
<a class="sourceLine" id="cb8-263" title="263"></a>
<a class="sourceLine" id="cb8-264" title="264"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-265" title="265"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-266" title="266"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_policy)</a>
<a class="sourceLine" id="cb8-267" title="267"></a>
<a class="sourceLine" id="cb8-268" title="268"></a>
<a class="sourceLine" id="cb8-269" title="269"><span class="co">## Community + Research</span></a>
<a class="sourceLine" id="cb8-270" title="270"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-271" title="271"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-272" title="272"></a>
<a class="sourceLine" id="cb8-273" title="273"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-274" title="274">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-275" title="275">    data.final<span class="op">$</span>cat_act_community_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-276" title="276">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-277" title="277">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-278" title="278">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-279" title="279">  }</a>
<a class="sourceLine" id="cb8-280" title="280">}</a>
<a class="sourceLine" id="cb8-281" title="281"></a>
<a class="sourceLine" id="cb8-282" title="282"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-283" title="283"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-284" title="284"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_research)</a>
<a class="sourceLine" id="cb8-285" title="285"></a>
<a class="sourceLine" id="cb8-286" title="286"></a>
<a class="sourceLine" id="cb8-287" title="287"><span class="co">## Community + Restoration</span></a>
<a class="sourceLine" id="cb8-288" title="288"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-289" title="289"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-290" title="290"></a>
<a class="sourceLine" id="cb8-291" title="291"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-292" title="292">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-293" title="293">    data.final<span class="op">$</span>cat_act_community_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-294" title="294">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_community_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-295" title="295">    data.final<span class="op">$</span>cat_act_community[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-296" title="296">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-297" title="297">  }</a>
<a class="sourceLine" id="cb8-298" title="298">}</a>
<a class="sourceLine" id="cb8-299" title="299"></a>
<a class="sourceLine" id="cb8-300" title="300"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-301" title="301"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community)</a>
<a class="sourceLine" id="cb8-302" title="302"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_community_restor)</a>
<a class="sourceLine" id="cb8-303" title="303"></a>
<a class="sourceLine" id="cb8-304" title="304"></a>
<a class="sourceLine" id="cb8-305" title="305"><span class="co">## Education + Funding</span></a>
<a class="sourceLine" id="cb8-306" title="306"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-307" title="307"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-308" title="308"></a>
<a class="sourceLine" id="cb8-309" title="309"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-310" title="310">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-311" title="311">    data.final<span class="op">$</span>cat_act_edu_funding[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-312" title="312">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_funding[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-313" title="313">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-314" title="314">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-315" title="315">  }</a>
<a class="sourceLine" id="cb8-316" title="316">}</a>
<a class="sourceLine" id="cb8-317" title="317"></a>
<a class="sourceLine" id="cb8-318" title="318"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-319" title="319"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-320" title="320"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_funding)</a>
<a class="sourceLine" id="cb8-321" title="321"></a>
<a class="sourceLine" id="cb8-322" title="322"></a>
<a class="sourceLine" id="cb8-323" title="323"><span class="co">## Education + Policy</span></a>
<a class="sourceLine" id="cb8-324" title="324"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-325" title="325"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-326" title="326"></a>
<a class="sourceLine" id="cb8-327" title="327"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-328" title="328">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-329" title="329">    data.final<span class="op">$</span>cat_act_edu_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-330" title="330">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-331" title="331">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-332" title="332">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-333" title="333">  }</a>
<a class="sourceLine" id="cb8-334" title="334">}</a>
<a class="sourceLine" id="cb8-335" title="335"></a>
<a class="sourceLine" id="cb8-336" title="336"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-337" title="337"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-338" title="338"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_policy)</a>
<a class="sourceLine" id="cb8-339" title="339"></a>
<a class="sourceLine" id="cb8-340" title="340"></a>
<a class="sourceLine" id="cb8-341" title="341"><span class="co">## Education + Research</span></a>
<a class="sourceLine" id="cb8-342" title="342"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-343" title="343"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-344" title="344"></a>
<a class="sourceLine" id="cb8-345" title="345"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-346" title="346">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-347" title="347">    data.final<span class="op">$</span>cat_act_edu_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-348" title="348">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-349" title="349">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-350" title="350">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-351" title="351">  }</a>
<a class="sourceLine" id="cb8-352" title="352">}</a>
<a class="sourceLine" id="cb8-353" title="353"></a>
<a class="sourceLine" id="cb8-354" title="354"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-355" title="355"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-356" title="356"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_research)</a>
<a class="sourceLine" id="cb8-357" title="357"></a>
<a class="sourceLine" id="cb8-358" title="358"></a>
<a class="sourceLine" id="cb8-359" title="359"><span class="co">## Education + Restoration</span></a>
<a class="sourceLine" id="cb8-360" title="360"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-361" title="361"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-362" title="362"></a>
<a class="sourceLine" id="cb8-363" title="363"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-364" title="364">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-365" title="365">    data.final<span class="op">$</span>cat_act_edu_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-366" title="366">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_edu_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-367" title="367">    data.final<span class="op">$</span>cat_act_edu[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-368" title="368">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-369" title="369">  }</a>
<a class="sourceLine" id="cb8-370" title="370">}</a>
<a class="sourceLine" id="cb8-371" title="371"></a>
<a class="sourceLine" id="cb8-372" title="372"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-373" title="373"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu)</a>
<a class="sourceLine" id="cb8-374" title="374"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_edu_restor)</a>
<a class="sourceLine" id="cb8-375" title="375"></a>
<a class="sourceLine" id="cb8-376" title="376"></a>
<a class="sourceLine" id="cb8-377" title="377"><span class="co">## Funding + Policy</span></a>
<a class="sourceLine" id="cb8-378" title="378"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-379" title="379"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb8-380" title="380"></a>
<a class="sourceLine" id="cb8-381" title="381"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-382" title="382">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-383" title="383">    data.final<span class="op">$</span>cat_act_funding_policy[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-384" title="384">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding_policy[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-385" title="385">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-386" title="386">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-387" title="387">  }</a>
<a class="sourceLine" id="cb8-388" title="388">}</a>
<a class="sourceLine" id="cb8-389" title="389"></a>
<a class="sourceLine" id="cb8-390" title="390"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-391" title="391"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb8-392" title="392"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding_policy)</a>
<a class="sourceLine" id="cb8-393" title="393"></a>
<a class="sourceLine" id="cb8-394" title="394"></a>
<a class="sourceLine" id="cb8-395" title="395"><span class="co">## Funding + Research</span></a>
<a class="sourceLine" id="cb8-396" title="396"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-397" title="397"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb8-398" title="398"></a>
<a class="sourceLine" id="cb8-399" title="399"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-400" title="400">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-401" title="401">    data.final<span class="op">$</span>cat_act_funding_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-402" title="402">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-403" title="403">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-404" title="404">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-405" title="405">  }</a>
<a class="sourceLine" id="cb8-406" title="406">}</a>
<a class="sourceLine" id="cb8-407" title="407"></a>
<a class="sourceLine" id="cb8-408" title="408"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-409" title="409"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb8-410" title="410"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding_research)</a>
<a class="sourceLine" id="cb8-411" title="411"></a>
<a class="sourceLine" id="cb8-412" title="412"></a>
<a class="sourceLine" id="cb8-413" title="413"><span class="co">## Funding + Restoration</span></a>
<a class="sourceLine" id="cb8-414" title="414"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-415" title="415"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb8-416" title="416"></a>
<a class="sourceLine" id="cb8-417" title="417"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-418" title="418">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-419" title="419">    data.final<span class="op">$</span>cat_act_funding_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-420" title="420">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_funding_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-421" title="421">    data.final<span class="op">$</span>cat_act_funding[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-422" title="422">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-423" title="423">  }</a>
<a class="sourceLine" id="cb8-424" title="424">}</a>
<a class="sourceLine" id="cb8-425" title="425"></a>
<a class="sourceLine" id="cb8-426" title="426"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-427" title="427"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding)</a>
<a class="sourceLine" id="cb8-428" title="428"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_funding_restor)</a>
<a class="sourceLine" id="cb8-429" title="429"></a>
<a class="sourceLine" id="cb8-430" title="430"></a>
<a class="sourceLine" id="cb8-431" title="431"><span class="co">## Policy + Research</span></a>
<a class="sourceLine" id="cb8-432" title="432"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-433" title="433"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb8-434" title="434"></a>
<a class="sourceLine" id="cb8-435" title="435"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-436" title="436">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-437" title="437">    data.final<span class="op">$</span>cat_act_policy_research[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-438" title="438">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy_research[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-439" title="439">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-440" title="440">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-441" title="441">  }</a>
<a class="sourceLine" id="cb8-442" title="442">}</a>
<a class="sourceLine" id="cb8-443" title="443"></a>
<a class="sourceLine" id="cb8-444" title="444"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-445" title="445"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb8-446" title="446"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy_research)</a>
<a class="sourceLine" id="cb8-447" title="447"></a>
<a class="sourceLine" id="cb8-448" title="448"></a>
<a class="sourceLine" id="cb8-449" title="449"><span class="co">## Policy + Restoration</span></a>
<a class="sourceLine" id="cb8-450" title="450"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-451" title="451"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb8-452" title="452"></a>
<a class="sourceLine" id="cb8-453" title="453"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-454" title="454">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-455" title="455">    data.final<span class="op">$</span>cat_act_policy_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-456" title="456">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_policy_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-457" title="457">    data.final<span class="op">$</span>cat_act_policy[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-458" title="458">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-459" title="459">  }</a>
<a class="sourceLine" id="cb8-460" title="460">}</a>
<a class="sourceLine" id="cb8-461" title="461"></a>
<a class="sourceLine" id="cb8-462" title="462"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-463" title="463"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy)</a>
<a class="sourceLine" id="cb8-464" title="464"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_policy_restor)</a>
<a class="sourceLine" id="cb8-465" title="465"></a>
<a class="sourceLine" id="cb8-466" title="466"></a>
<a class="sourceLine" id="cb8-467" title="467"><span class="co">## Research + Restoration</span></a>
<a class="sourceLine" id="cb8-468" title="468"><span class="co">#test</span></a>
<a class="sourceLine" id="cb8-469" title="469"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb8-470" title="470"></a>
<a class="sourceLine" id="cb8-471" title="471"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb8-472" title="472">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_research[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_act_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-473" title="473">    data.final<span class="op">$</span>cat_act_research_restor[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb8-474" title="474">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_act_research_restor[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb8-475" title="475">    data.final<span class="op">$</span>cat_act_research[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-476" title="476">    data.final<span class="op">$</span>cat_act_restor[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb8-477" title="477">  }</a>
<a class="sourceLine" id="cb8-478" title="478">}</a>
<a class="sourceLine" id="cb8-479" title="479"></a>
<a class="sourceLine" id="cb8-480" title="480"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb8-481" title="481"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research)</a>
<a class="sourceLine" id="cb8-482" title="482"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_act_research_restor)</a></code></pre></div>
</div>
<div id="multi-category-filtering-threat-categories" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Multi-category Filtering: Threat Categories</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">threat &lt;-<span class="st"> </span>data.final[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">37</span><span class="op">:</span><span class="dv">42</span>)]</a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3">threat &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sumAcross =</span> cat_threat_climate <span class="op">+</span><span class="st"> </span>cat_threat_energytransport <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">           </span>cat_threat_habitat <span class="op">+</span><span class="st"> </span>cat_threat_inv_spec <span class="op">+</span><span class="st"> </span>cat_threat_overexp <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">           </span>cat_threat_pollution) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb9-8" title="8"></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co"># Checking number of grants/money for multiple threation category grants</span></a>
<a class="sourceLine" id="cb9-10" title="10">tot_threat &lt;-<span class="st"> </span><span class="kw">sum</span>(threat<span class="op">$</span>Grant.Amount) <span class="co"># total = </span></a>
<a class="sourceLine" id="cb9-11" title="11"></a>
<a class="sourceLine" id="cb9-12" title="12">threat4 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span>)</a>
<a class="sourceLine" id="cb9-14" title="14"><span class="kw">nrow</span>(threat4)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb9-15" title="15"><span class="kw">sum</span>(threat4<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb9-16" title="16"><span class="co"># Retained all grants</span></a>
<a class="sourceLine" id="cb9-17" title="17"></a>
<a class="sourceLine" id="cb9-18" title="18">threat3 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-19" title="19"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb9-20" title="20"><span class="kw">nrow</span>(threat3)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb9-21" title="21"><span class="kw">sum</span>(threat3<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb9-22" title="22"><span class="co"># Retained 99.75% of grants, 99.21% of money</span></a>
<a class="sourceLine" id="cb9-23" title="23"></a>
<a class="sourceLine" id="cb9-24" title="24">threat2 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-25" title="25"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb9-26" title="26"><span class="kw">nrow</span>(threat2)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb9-27" title="27"><span class="kw">sum</span>(threat2<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co"># Retained 96.95% of grants, 95.39% of money</span></a>
<a class="sourceLine" id="cb9-29" title="29"></a>
<a class="sourceLine" id="cb9-30" title="30">threat1 &lt;-<span class="st"> </span>threat <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-31" title="31"><span class="st">  </span><span class="kw">filter</span>(sumAcross <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb9-32" title="32"><span class="kw">nrow</span>(threat1)<span class="op">/</span><span class="kw">nrow</span>(threat)</a>
<a class="sourceLine" id="cb9-33" title="33"><span class="kw">sum</span>(threat1<span class="op">$</span>Grant.Amount)<span class="op">/</span>tot_threat</a>
<a class="sourceLine" id="cb9-34" title="34"><span class="co"># Retained 77.55% of grants, 72.19% of money</span></a>
<a class="sourceLine" id="cb9-35" title="35"></a>
<a class="sourceLine" id="cb9-36" title="36">n_threats &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb9-37" title="37">n_threat_grants &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">nrow</span>(threat1), </a>
<a class="sourceLine" id="cb9-38" title="38">                  <span class="kw">nrow</span>(threat2) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat1), </a>
<a class="sourceLine" id="cb9-39" title="39">                  <span class="kw">nrow</span>(threat3) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat2),</a>
<a class="sourceLine" id="cb9-40" title="40">                  <span class="kw">nrow</span>(threat4) <span class="op">-</span><span class="st"> </span><span class="kw">nrow</span>(threat3))</a>
<a class="sourceLine" id="cb9-41" title="41"></a>
<a class="sourceLine" id="cb9-42" title="42">threats &lt;-<span class="st"> </span><span class="kw">data.frame</span>(n_threats, n_threat_grants)</a>
<a class="sourceLine" id="cb9-43" title="43"><span class="kw">ggplot</span>(threats, <span class="kw">aes</span>(<span class="dt">x =</span> n_threats, <span class="dt">y =</span> n_threat_grants)) <span class="op">+</span></a>
<a class="sourceLine" id="cb9-44" title="44"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb9-45" title="45"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;# Grants in Multiple Threat Categories&quot;</span>)</a>
<a class="sourceLine" id="cb9-46" title="46"></a>
<a class="sourceLine" id="cb9-47" title="47"><span class="co">#### &gt;2 category grants (threat_other)</span></a>
<a class="sourceLine" id="cb9-48" title="48"></a>
<a class="sourceLine" id="cb9-49" title="49">threat_other &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-50" title="50"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_threat =</span> cat_threat_climate <span class="op">+</span><span class="st"> </span>cat_threat_energytransport <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-51" title="51"><span class="st">           </span>cat_threat_habitat <span class="op">+</span><span class="st"> </span>cat_threat_inv_spec <span class="op">+</span><span class="st"> </span>cat_threat_overexp <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-52" title="52"><span class="st">           </span>cat_threat_pollution) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-53" title="53"><span class="st">  </span><span class="kw">filter</span>(sum_threat <span class="op">&gt;</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb9-54" title="54"></a>
<a class="sourceLine" id="cb9-55" title="55"><span class="co">#### Adding 2-threat categories</span></a>
<a class="sourceLine" id="cb9-56" title="56"></a>
<a class="sourceLine" id="cb9-57" title="57">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-58" title="58"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_threat_climate_energytransport =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-59" title="59">         <span class="dt">cat_threat_climate_habitat =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-60" title="60">         <span class="dt">cat_threat_climate_inv_spec =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-61" title="61">         <span class="dt">cat_threat_climate_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-62" title="62">         <span class="dt">cat_threat_climate_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-63" title="63">         <span class="dt">cat_threat_energytransport_habitat =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-64" title="64">         <span class="dt">cat_threat_energytransport_inv_spec =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-65" title="65">         <span class="dt">cat_threat_energytransport_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-66" title="66">         <span class="dt">cat_threat_energytransport_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-67" title="67">         <span class="dt">cat_threat_habitat_inv_spec =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-68" title="68">         <span class="dt">cat_threat_habitat_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-69" title="69">         <span class="dt">cat_threat_habitat_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-70" title="70">         <span class="dt">cat_threat_inv_spec_overexp =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-71" title="71">         <span class="dt">cat_threat_inv_spec_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-72" title="72">         <span class="dt">cat_threat_overexp_pollution =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb9-73" title="73">         <span class="dt">cat_threat_other =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb9-74" title="74"></a>
<a class="sourceLine" id="cb9-75" title="75"></a>
<a class="sourceLine" id="cb9-76" title="76"></a>
<a class="sourceLine" id="cb9-77" title="77"><span class="co">#### Filling Mulitple Threat cells ####</span></a>
<a class="sourceLine" id="cb9-78" title="78"></a>
<a class="sourceLine" id="cb9-79" title="79"><span class="co">## Other Threats (&gt;2 Categories)</span></a>
<a class="sourceLine" id="cb9-80" title="80"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-81" title="81"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb9-82" title="82"></a>
<a class="sourceLine" id="cb9-83" title="83"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-84" title="84">  <span class="cf">if</span>(<span class="kw">sum</span>(data.final[i,<span class="dv">37</span><span class="op">:</span><span class="dv">42</span>]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb9-85" title="85">    data.final<span class="op">$</span>cat_threat_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb9-86" title="86">    data.final[i, <span class="dv">37</span><span class="op">:</span><span class="dv">42</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb9-87" title="87">  }</a>
<a class="sourceLine" id="cb9-88" title="88">}</a>
<a class="sourceLine" id="cb9-89" title="89"></a>
<a class="sourceLine" id="cb9-90" title="90"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-91" title="91"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb9-92" title="92"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_other) <span class="co"># matches nrow of threats_other DF</span></a>
<a class="sourceLine" id="cb9-93" title="93"></a>
<a class="sourceLine" id="cb9-94" title="94"></a>
<a class="sourceLine" id="cb9-95" title="95"><span class="co">## Climate + Energy/Transportation</span></a>
<a class="sourceLine" id="cb9-96" title="96"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-97" title="97"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-98" title="98"></a>
<a class="sourceLine" id="cb9-99" title="99"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-100" title="100">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-101" title="101">    data.final<span class="op">$</span>cat_threat_climate_energytransport[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-102" title="102">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_energytransport[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-103" title="103">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-104" title="104">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-105" title="105">  }</a>
<a class="sourceLine" id="cb9-106" title="106">}</a>
<a class="sourceLine" id="cb9-107" title="107"></a>
<a class="sourceLine" id="cb9-108" title="108"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-109" title="109"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-110" title="110"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_energytransport)</a>
<a class="sourceLine" id="cb9-111" title="111"></a>
<a class="sourceLine" id="cb9-112" title="112"></a>
<a class="sourceLine" id="cb9-113" title="113"><span class="co">## Climate + Habitat</span></a>
<a class="sourceLine" id="cb9-114" title="114"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-115" title="115"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-116" title="116"></a>
<a class="sourceLine" id="cb9-117" title="117"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-118" title="118">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-119" title="119">    data.final<span class="op">$</span>cat_threat_climate_habitat[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-120" title="120">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-121" title="121">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-122" title="122">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-123" title="123">  }</a>
<a class="sourceLine" id="cb9-124" title="124">}</a>
<a class="sourceLine" id="cb9-125" title="125"></a>
<a class="sourceLine" id="cb9-126" title="126"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-127" title="127"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-128" title="128"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_habitat)</a>
<a class="sourceLine" id="cb9-129" title="129"></a>
<a class="sourceLine" id="cb9-130" title="130"></a>
<a class="sourceLine" id="cb9-131" title="131"><span class="co">## Climate + Invasive Species</span></a>
<a class="sourceLine" id="cb9-132" title="132"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-133" title="133"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-134" title="134"></a>
<a class="sourceLine" id="cb9-135" title="135"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-136" title="136">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-137" title="137">    data.final<span class="op">$</span>cat_threat_climate_inv_spec[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-138" title="138">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-139" title="139">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-140" title="140">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-141" title="141">  }</a>
<a class="sourceLine" id="cb9-142" title="142">}</a>
<a class="sourceLine" id="cb9-143" title="143"></a>
<a class="sourceLine" id="cb9-144" title="144"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-145" title="145"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-146" title="146"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_inv_spec)</a>
<a class="sourceLine" id="cb9-147" title="147"></a>
<a class="sourceLine" id="cb9-148" title="148"></a>
<a class="sourceLine" id="cb9-149" title="149"><span class="co">## Climate + Overexploitation</span></a>
<a class="sourceLine" id="cb9-150" title="150"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-151" title="151"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-152" title="152"></a>
<a class="sourceLine" id="cb9-153" title="153"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-154" title="154">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-155" title="155">    data.final<span class="op">$</span>cat_threat_climate_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-156" title="156">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-157" title="157">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-158" title="158">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-159" title="159">  }</a>
<a class="sourceLine" id="cb9-160" title="160">}</a>
<a class="sourceLine" id="cb9-161" title="161"></a>
<a class="sourceLine" id="cb9-162" title="162"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-163" title="163"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-164" title="164"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_overexp)</a>
<a class="sourceLine" id="cb9-165" title="165"></a>
<a class="sourceLine" id="cb9-166" title="166"></a>
<a class="sourceLine" id="cb9-167" title="167"><span class="co">## Climate + Pollution</span></a>
<a class="sourceLine" id="cb9-168" title="168"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-169" title="169"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-170" title="170"></a>
<a class="sourceLine" id="cb9-171" title="171"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-172" title="172">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-173" title="173">    data.final<span class="op">$</span>cat_threat_climate_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-174" title="174">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_climate_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-175" title="175">    data.final<span class="op">$</span>cat_threat_climate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-176" title="176">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-177" title="177">  }</a>
<a class="sourceLine" id="cb9-178" title="178">}</a>
<a class="sourceLine" id="cb9-179" title="179"></a>
<a class="sourceLine" id="cb9-180" title="180"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-181" title="181"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate)</a>
<a class="sourceLine" id="cb9-182" title="182"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_climate_pollution)</a>
<a class="sourceLine" id="cb9-183" title="183"></a>
<a class="sourceLine" id="cb9-184" title="184"></a>
<a class="sourceLine" id="cb9-185" title="185"><span class="co">## Energy/Transportation + Habitat</span></a>
<a class="sourceLine" id="cb9-186" title="186"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-187" title="187"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-188" title="188"></a>
<a class="sourceLine" id="cb9-189" title="189"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-190" title="190">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-191" title="191">    data.final<span class="op">$</span>cat_threat_energytransport_habitat[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-192" title="192">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_habitat[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-193" title="193">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-194" title="194">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-195" title="195">  }</a>
<a class="sourceLine" id="cb9-196" title="196">}</a>
<a class="sourceLine" id="cb9-197" title="197"></a>
<a class="sourceLine" id="cb9-198" title="198"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-199" title="199"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-200" title="200"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_habitat)</a>
<a class="sourceLine" id="cb9-201" title="201"></a>
<a class="sourceLine" id="cb9-202" title="202"></a>
<a class="sourceLine" id="cb9-203" title="203"><span class="co">## Energy/Transportation + Invasive Species</span></a>
<a class="sourceLine" id="cb9-204" title="204"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-205" title="205"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-206" title="206"></a>
<a class="sourceLine" id="cb9-207" title="207"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-208" title="208">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-209" title="209">    data.final<span class="op">$</span>cat_threat_energytransport_inv_spec[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-210" title="210">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-211" title="211">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-212" title="212">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-213" title="213">  }</a>
<a class="sourceLine" id="cb9-214" title="214">}</a>
<a class="sourceLine" id="cb9-215" title="215"></a>
<a class="sourceLine" id="cb9-216" title="216"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-217" title="217"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-218" title="218"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_inv_spec)</a>
<a class="sourceLine" id="cb9-219" title="219"></a>
<a class="sourceLine" id="cb9-220" title="220"></a>
<a class="sourceLine" id="cb9-221" title="221"><span class="co">## Energy/Transportation + Overexploitation</span></a>
<a class="sourceLine" id="cb9-222" title="222"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-223" title="223"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-224" title="224"></a>
<a class="sourceLine" id="cb9-225" title="225"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-226" title="226">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-227" title="227">    data.final<span class="op">$</span>cat_threat_energytransport_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-228" title="228">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-229" title="229">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-230" title="230">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-231" title="231">  }</a>
<a class="sourceLine" id="cb9-232" title="232">}</a>
<a class="sourceLine" id="cb9-233" title="233"></a>
<a class="sourceLine" id="cb9-234" title="234"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-235" title="235"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-236" title="236"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_overexp)</a>
<a class="sourceLine" id="cb9-237" title="237"></a>
<a class="sourceLine" id="cb9-238" title="238"></a>
<a class="sourceLine" id="cb9-239" title="239"><span class="co">## Energy/Transportation + Pollution</span></a>
<a class="sourceLine" id="cb9-240" title="240"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-241" title="241"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-242" title="242"></a>
<a class="sourceLine" id="cb9-243" title="243"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-244" title="244">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-245" title="245">    data.final<span class="op">$</span>cat_threat_energytransport_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-246" title="246">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_energytransport_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-247" title="247">    data.final<span class="op">$</span>cat_threat_energytransport[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-248" title="248">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-249" title="249">  }</a>
<a class="sourceLine" id="cb9-250" title="250">}</a>
<a class="sourceLine" id="cb9-251" title="251"></a>
<a class="sourceLine" id="cb9-252" title="252"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-253" title="253"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport)</a>
<a class="sourceLine" id="cb9-254" title="254"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_energytransport_pollution)</a>
<a class="sourceLine" id="cb9-255" title="255"></a>
<a class="sourceLine" id="cb9-256" title="256"></a>
<a class="sourceLine" id="cb9-257" title="257"><span class="co">## Habitat + Invasive Species</span></a>
<a class="sourceLine" id="cb9-258" title="258"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-259" title="259"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb9-260" title="260"></a>
<a class="sourceLine" id="cb9-261" title="261"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-262" title="262">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-263" title="263">    data.final<span class="op">$</span>cat_threat_habitat_inv_spec[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-264" title="264">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat_inv_spec[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-265" title="265">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-266" title="266">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-267" title="267">  }</a>
<a class="sourceLine" id="cb9-268" title="268">}</a>
<a class="sourceLine" id="cb9-269" title="269"></a>
<a class="sourceLine" id="cb9-270" title="270"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-271" title="271"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb9-272" title="272"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat_inv_spec)</a>
<a class="sourceLine" id="cb9-273" title="273"></a>
<a class="sourceLine" id="cb9-274" title="274"></a>
<a class="sourceLine" id="cb9-275" title="275"><span class="co">## Habitat + Overexploitation</span></a>
<a class="sourceLine" id="cb9-276" title="276"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-277" title="277"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb9-278" title="278"></a>
<a class="sourceLine" id="cb9-279" title="279"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-280" title="280">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-281" title="281">    data.final<span class="op">$</span>cat_threat_habitat_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-282" title="282">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-283" title="283">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-284" title="284">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-285" title="285">  }</a>
<a class="sourceLine" id="cb9-286" title="286">}</a>
<a class="sourceLine" id="cb9-287" title="287"></a>
<a class="sourceLine" id="cb9-288" title="288"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-289" title="289"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb9-290" title="290"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat_overexp)</a>
<a class="sourceLine" id="cb9-291" title="291"></a>
<a class="sourceLine" id="cb9-292" title="292"></a>
<a class="sourceLine" id="cb9-293" title="293"><span class="co">## Habitat + Pollution</span></a>
<a class="sourceLine" id="cb9-294" title="294"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-295" title="295"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb9-296" title="296"></a>
<a class="sourceLine" id="cb9-297" title="297"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-298" title="298">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-299" title="299">    data.final<span class="op">$</span>cat_threat_habitat_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-300" title="300">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_habitat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-301" title="301">    data.final<span class="op">$</span>cat_threat_habitat[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-302" title="302">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-303" title="303">  }</a>
<a class="sourceLine" id="cb9-304" title="304">}</a>
<a class="sourceLine" id="cb9-305" title="305"></a>
<a class="sourceLine" id="cb9-306" title="306"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-307" title="307"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat)</a>
<a class="sourceLine" id="cb9-308" title="308"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_habitat_pollution)</a>
<a class="sourceLine" id="cb9-309" title="309"></a>
<a class="sourceLine" id="cb9-310" title="310"></a>
<a class="sourceLine" id="cb9-311" title="311"><span class="co">## Invasive Species + Overexploitation</span></a>
<a class="sourceLine" id="cb9-312" title="312"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-313" title="313"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb9-314" title="314"></a>
<a class="sourceLine" id="cb9-315" title="315"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-316" title="316">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-317" title="317">    data.final<span class="op">$</span>cat_threat_inv_spec_overexp[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-318" title="318">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec_overexp[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-319" title="319">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-320" title="320">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-321" title="321">  }</a>
<a class="sourceLine" id="cb9-322" title="322">}</a>
<a class="sourceLine" id="cb9-323" title="323"></a>
<a class="sourceLine" id="cb9-324" title="324"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-325" title="325"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb9-326" title="326"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec_overexp)</a>
<a class="sourceLine" id="cb9-327" title="327"></a>
<a class="sourceLine" id="cb9-328" title="328"></a>
<a class="sourceLine" id="cb9-329" title="329"><span class="co">## Invasive Species + Pollution</span></a>
<a class="sourceLine" id="cb9-330" title="330"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-331" title="331"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb9-332" title="332"></a>
<a class="sourceLine" id="cb9-333" title="333"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-334" title="334">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-335" title="335">    data.final<span class="op">$</span>cat_threat_inv_spec_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-336" title="336">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_inv_spec_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-337" title="337">    data.final<span class="op">$</span>cat_threat_inv_spec[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-338" title="338">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-339" title="339">  }</a>
<a class="sourceLine" id="cb9-340" title="340">}</a>
<a class="sourceLine" id="cb9-341" title="341"></a>
<a class="sourceLine" id="cb9-342" title="342"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-343" title="343"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec)</a>
<a class="sourceLine" id="cb9-344" title="344"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_inv_spec_pollution)</a>
<a class="sourceLine" id="cb9-345" title="345"></a>
<a class="sourceLine" id="cb9-346" title="346"></a>
<a class="sourceLine" id="cb9-347" title="347"><span class="co">## Overexploitation + Pollution</span></a>
<a class="sourceLine" id="cb9-348" title="348"><span class="co">#test</span></a>
<a class="sourceLine" id="cb9-349" title="349"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb9-350" title="350"></a>
<a class="sourceLine" id="cb9-351" title="351"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb9-352" title="352">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_overexp[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_threat_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-353" title="353">    data.final<span class="op">$</span>cat_threat_overexp_pollution[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb9-354" title="354">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_threat_overexp_pollution[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb9-355" title="355">    data.final<span class="op">$</span>cat_threat_overexp[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-356" title="356">    data.final<span class="op">$</span>cat_threat_pollution[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb9-357" title="357">  }</a>
<a class="sourceLine" id="cb9-358" title="358">}</a>
<a class="sourceLine" id="cb9-359" title="359"></a>
<a class="sourceLine" id="cb9-360" title="360"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb9-361" title="361"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp)</a>
<a class="sourceLine" id="cb9-362" title="362"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_threat_overexp_pollution)</a></code></pre></div>
</div>
<div id="multi-category-filtering-taxa-category" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Multi-category Filtering: Taxa Category</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">taxa &lt;-<span class="st"> </span>data.final[,<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">30</span><span class="op">:</span><span class="dv">36</span>)]</a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3">taxa_other &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">sum_taxa =</span> <span class="kw">rowSums</span>(.[<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>])) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">  </span><span class="kw">filter</span>(sum_taxa <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb10-6" title="6"></a>
<a class="sourceLine" id="cb10-7" title="7"></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">## Adding 2-taxa categories and other</span></a>
<a class="sourceLine" id="cb10-9" title="9">data.final &lt;-<span class="st"> </span>data.final <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cat_taxa_amphibian_bird =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-11" title="11">         <span class="dt">cat_taxa_amphibian_fish =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-12" title="12">         <span class="dt">cat_taxa_amphibian_invertebrate =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-13" title="13">         <span class="dt">cat_taxa_amphibian_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-14" title="14">         <span class="dt">cat_taxa_amphibian_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-15" title="15">         <span class="dt">cat_taxa_amphibian_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-16" title="16">         <span class="dt">cat_taxa_bird_fish =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-17" title="17">         <span class="dt">cat_taxa_bird_invertebrate =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-18" title="18">         <span class="dt">cat_taxa_bird_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-19" title="19">         <span class="dt">cat_taxa_bird_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-20" title="20">         <span class="dt">cat_taxa_bird_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-21" title="21">         <span class="dt">cat_taxa_fish_invertebrate =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-22" title="22">         <span class="dt">cat_taxa_fish_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-23" title="23">         <span class="dt">cat_taxa_fish_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-24" title="24">         <span class="dt">cat_taxa_fish_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-25" title="25">         <span class="dt">cat_taxa_invertebrate_mammal =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-26" title="26">         <span class="dt">cat_taxa_invertebrate_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-27" title="27">         <span class="dt">cat_taxa_invertebrate_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-28" title="28">         <span class="dt">cat_taxa_mammal_plant =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-29" title="29">         <span class="dt">cat_taxa_mammal_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-30" title="30">         <span class="dt">cat_taxa_plant_reptile =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb10-31" title="31">         <span class="dt">cat_taxa_other =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb10-32" title="32"></a>
<a class="sourceLine" id="cb10-33" title="33"><span class="co">#### Filling Multiple Taxa cells ####</span></a>
<a class="sourceLine" id="cb10-34" title="34"></a>
<a class="sourceLine" id="cb10-35" title="35"><span class="co">## Other Taxa (&gt;2 classifications)</span></a>
<a class="sourceLine" id="cb10-36" title="36"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-37" title="37"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb10-38" title="38"></a>
<a class="sourceLine" id="cb10-39" title="39"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)) {</a>
<a class="sourceLine" id="cb10-40" title="40">  <span class="cf">if</span>(<span class="kw">sum</span>(data.final[i,<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>]) <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) {</a>
<a class="sourceLine" id="cb10-41" title="41">    data.final<span class="op">$</span>cat_taxa_other[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb10-42" title="42">    data.final[i,<span class="dv">30</span><span class="op">:</span><span class="dv">36</span>] =<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb10-43" title="43">  }</a>
<a class="sourceLine" id="cb10-44" title="44">}</a>
<a class="sourceLine" id="cb10-45" title="45"></a>
<a class="sourceLine" id="cb10-46" title="46"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-47" title="47"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb10-48" title="48"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_other) <span class="co"># matches nrow of taxa_other DF</span></a>
<a class="sourceLine" id="cb10-49" title="49"></a>
<a class="sourceLine" id="cb10-50" title="50"></a>
<a class="sourceLine" id="cb10-51" title="51"><span class="co">## amphibian + bird</span></a>
<a class="sourceLine" id="cb10-52" title="52"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-53" title="53"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-54" title="54"></a>
<a class="sourceLine" id="cb10-55" title="55"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-56" title="56">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-57" title="57">    data.final<span class="op">$</span>cat_taxa_amphibian_bird[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-58" title="58">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_bird[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-59" title="59">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-60" title="60">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-61" title="61">  }</a>
<a class="sourceLine" id="cb10-62" title="62">}</a>
<a class="sourceLine" id="cb10-63" title="63"></a>
<a class="sourceLine" id="cb10-64" title="64"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-65" title="65"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-66" title="66"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_bird)</a>
<a class="sourceLine" id="cb10-67" title="67"></a>
<a class="sourceLine" id="cb10-68" title="68"></a>
<a class="sourceLine" id="cb10-69" title="69"><span class="co">## amphibian + fish</span></a>
<a class="sourceLine" id="cb10-70" title="70"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-71" title="71"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-72" title="72"></a>
<a class="sourceLine" id="cb10-73" title="73"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-74" title="74">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-75" title="75">    data.final<span class="op">$</span>cat_taxa_amphibian_fish[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-76" title="76">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-77" title="77">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-78" title="78">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-79" title="79">  }</a>
<a class="sourceLine" id="cb10-80" title="80">}</a>
<a class="sourceLine" id="cb10-81" title="81"></a>
<a class="sourceLine" id="cb10-82" title="82"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-83" title="83"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-84" title="84"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_fish)</a>
<a class="sourceLine" id="cb10-85" title="85"></a>
<a class="sourceLine" id="cb10-86" title="86"></a>
<a class="sourceLine" id="cb10-87" title="87"><span class="co">## amphibian + invertebrate</span></a>
<a class="sourceLine" id="cb10-88" title="88"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-89" title="89"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-90" title="90"></a>
<a class="sourceLine" id="cb10-91" title="91"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-92" title="92">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-93" title="93">    data.final<span class="op">$</span>cat_taxa_amphibian_invertebrate[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-94" title="94">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-95" title="95">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-96" title="96">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-97" title="97">  }</a>
<a class="sourceLine" id="cb10-98" title="98">}</a>
<a class="sourceLine" id="cb10-99" title="99"></a>
<a class="sourceLine" id="cb10-100" title="100"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-101" title="101"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-102" title="102"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_invertebrate)</a>
<a class="sourceLine" id="cb10-103" title="103"></a>
<a class="sourceLine" id="cb10-104" title="104"></a>
<a class="sourceLine" id="cb10-105" title="105"><span class="co">## amphibian + mammal</span></a>
<a class="sourceLine" id="cb10-106" title="106"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-107" title="107"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-108" title="108"></a>
<a class="sourceLine" id="cb10-109" title="109"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-110" title="110">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-111" title="111">    data.final<span class="op">$</span>cat_taxa_amphibian_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-112" title="112">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-113" title="113">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-114" title="114">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-115" title="115">  }</a>
<a class="sourceLine" id="cb10-116" title="116">}</a>
<a class="sourceLine" id="cb10-117" title="117"></a>
<a class="sourceLine" id="cb10-118" title="118"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-119" title="119"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-120" title="120"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_mammal)</a>
<a class="sourceLine" id="cb10-121" title="121"></a>
<a class="sourceLine" id="cb10-122" title="122"></a>
<a class="sourceLine" id="cb10-123" title="123"><span class="co">## amphibian + plant</span></a>
<a class="sourceLine" id="cb10-124" title="124"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-125" title="125"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-126" title="126"></a>
<a class="sourceLine" id="cb10-127" title="127"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-128" title="128">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-129" title="129">    data.final<span class="op">$</span>cat_taxa_amphibian_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-130" title="130">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-131" title="131">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-132" title="132">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-133" title="133">  }</a>
<a class="sourceLine" id="cb10-134" title="134">}</a>
<a class="sourceLine" id="cb10-135" title="135"></a>
<a class="sourceLine" id="cb10-136" title="136"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-137" title="137"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-138" title="138"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_plant)</a>
<a class="sourceLine" id="cb10-139" title="139"></a>
<a class="sourceLine" id="cb10-140" title="140"></a>
<a class="sourceLine" id="cb10-141" title="141"><span class="co">## amphibian + reptile</span></a>
<a class="sourceLine" id="cb10-142" title="142"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-143" title="143"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-144" title="144"></a>
<a class="sourceLine" id="cb10-145" title="145"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-146" title="146">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-147" title="147">    data.final<span class="op">$</span>cat_taxa_amphibian_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-148" title="148">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_amphibian_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-149" title="149">    data.final<span class="op">$</span>cat_taxa_amphibian[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-150" title="150">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-151" title="151">  }</a>
<a class="sourceLine" id="cb10-152" title="152">}</a>
<a class="sourceLine" id="cb10-153" title="153"></a>
<a class="sourceLine" id="cb10-154" title="154"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-155" title="155"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian)</a>
<a class="sourceLine" id="cb10-156" title="156"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_amphibian_reptile)</a>
<a class="sourceLine" id="cb10-157" title="157"></a>
<a class="sourceLine" id="cb10-158" title="158"></a>
<a class="sourceLine" id="cb10-159" title="159"><span class="co">## bird + fish</span></a>
<a class="sourceLine" id="cb10-160" title="160"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-161" title="161"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-162" title="162"></a>
<a class="sourceLine" id="cb10-163" title="163"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-164" title="164">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-165" title="165">    data.final<span class="op">$</span>cat_taxa_bird_fish[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-166" title="166">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_fish[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-167" title="167">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-168" title="168">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-169" title="169">  }</a>
<a class="sourceLine" id="cb10-170" title="170">}</a>
<a class="sourceLine" id="cb10-171" title="171"></a>
<a class="sourceLine" id="cb10-172" title="172"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-173" title="173"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-174" title="174"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_fish)</a>
<a class="sourceLine" id="cb10-175" title="175"></a>
<a class="sourceLine" id="cb10-176" title="176"></a>
<a class="sourceLine" id="cb10-177" title="177"><span class="co">## bird + invertebrate</span></a>
<a class="sourceLine" id="cb10-178" title="178"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-179" title="179"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-180" title="180"></a>
<a class="sourceLine" id="cb10-181" title="181"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-182" title="182">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-183" title="183">    data.final<span class="op">$</span>cat_taxa_bird_invertebrate[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-184" title="184">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-185" title="185">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-186" title="186">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-187" title="187">  }</a>
<a class="sourceLine" id="cb10-188" title="188">}</a>
<a class="sourceLine" id="cb10-189" title="189"></a>
<a class="sourceLine" id="cb10-190" title="190"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-191" title="191"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-192" title="192"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_invertebrate)</a>
<a class="sourceLine" id="cb10-193" title="193"></a>
<a class="sourceLine" id="cb10-194" title="194"></a>
<a class="sourceLine" id="cb10-195" title="195"><span class="co">## bird + mammal</span></a>
<a class="sourceLine" id="cb10-196" title="196"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-197" title="197"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-198" title="198"></a>
<a class="sourceLine" id="cb10-199" title="199"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-200" title="200">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-201" title="201">    data.final<span class="op">$</span>cat_taxa_bird_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-202" title="202">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-203" title="203">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-204" title="204">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-205" title="205">  }</a>
<a class="sourceLine" id="cb10-206" title="206">}</a>
<a class="sourceLine" id="cb10-207" title="207"></a>
<a class="sourceLine" id="cb10-208" title="208"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-209" title="209"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-210" title="210"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_mammal)</a>
<a class="sourceLine" id="cb10-211" title="211"></a>
<a class="sourceLine" id="cb10-212" title="212"></a>
<a class="sourceLine" id="cb10-213" title="213"><span class="co">## bird + plant</span></a>
<a class="sourceLine" id="cb10-214" title="214"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-215" title="215"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-216" title="216"></a>
<a class="sourceLine" id="cb10-217" title="217"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-218" title="218">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-219" title="219">    data.final<span class="op">$</span>cat_taxa_bird_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-220" title="220">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-221" title="221">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-222" title="222">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-223" title="223">  }</a>
<a class="sourceLine" id="cb10-224" title="224">}</a>
<a class="sourceLine" id="cb10-225" title="225"></a>
<a class="sourceLine" id="cb10-226" title="226"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-227" title="227"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-228" title="228"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_plant)</a>
<a class="sourceLine" id="cb10-229" title="229"></a>
<a class="sourceLine" id="cb10-230" title="230"></a>
<a class="sourceLine" id="cb10-231" title="231"><span class="co">## bird + reptile</span></a>
<a class="sourceLine" id="cb10-232" title="232"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-233" title="233"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-234" title="234"></a>
<a class="sourceLine" id="cb10-235" title="235"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-236" title="236">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-237" title="237">    data.final<span class="op">$</span>cat_taxa_bird_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-238" title="238">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_bird_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-239" title="239">    data.final<span class="op">$</span>cat_taxa_bird[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-240" title="240">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-241" title="241">  }</a>
<a class="sourceLine" id="cb10-242" title="242">}</a>
<a class="sourceLine" id="cb10-243" title="243"></a>
<a class="sourceLine" id="cb10-244" title="244"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-245" title="245"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird)</a>
<a class="sourceLine" id="cb10-246" title="246"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_bird_reptile)</a>
<a class="sourceLine" id="cb10-247" title="247"></a>
<a class="sourceLine" id="cb10-248" title="248"></a>
<a class="sourceLine" id="cb10-249" title="249"><span class="co">## fish + invertebrate</span></a>
<a class="sourceLine" id="cb10-250" title="250"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-251" title="251"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-252" title="252"></a>
<a class="sourceLine" id="cb10-253" title="253"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-254" title="254">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-255" title="255">    data.final<span class="op">$</span>cat_taxa_fish_invertebrate[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-256" title="256">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_invertebrate[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-257" title="257">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-258" title="258">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-259" title="259">  }</a>
<a class="sourceLine" id="cb10-260" title="260">}</a>
<a class="sourceLine" id="cb10-261" title="261"></a>
<a class="sourceLine" id="cb10-262" title="262"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-263" title="263"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-264" title="264"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_invertebrate)</a>
<a class="sourceLine" id="cb10-265" title="265"></a>
<a class="sourceLine" id="cb10-266" title="266"></a>
<a class="sourceLine" id="cb10-267" title="267"><span class="co">## fish + mammal</span></a>
<a class="sourceLine" id="cb10-268" title="268"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-269" title="269"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-270" title="270"></a>
<a class="sourceLine" id="cb10-271" title="271"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-272" title="272">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-273" title="273">    data.final<span class="op">$</span>cat_taxa_fish_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-274" title="274">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-275" title="275">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-276" title="276">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-277" title="277">  }</a>
<a class="sourceLine" id="cb10-278" title="278">}</a>
<a class="sourceLine" id="cb10-279" title="279"></a>
<a class="sourceLine" id="cb10-280" title="280"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-281" title="281"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-282" title="282"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_mammal)</a>
<a class="sourceLine" id="cb10-283" title="283"></a>
<a class="sourceLine" id="cb10-284" title="284"></a>
<a class="sourceLine" id="cb10-285" title="285"><span class="co">## fish + plant</span></a>
<a class="sourceLine" id="cb10-286" title="286"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-287" title="287"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-288" title="288"></a>
<a class="sourceLine" id="cb10-289" title="289"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-290" title="290">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-291" title="291">    data.final<span class="op">$</span>cat_taxa_fish_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-292" title="292">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-293" title="293">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-294" title="294">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-295" title="295">  }</a>
<a class="sourceLine" id="cb10-296" title="296">}</a>
<a class="sourceLine" id="cb10-297" title="297"></a>
<a class="sourceLine" id="cb10-298" title="298"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-299" title="299"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-300" title="300"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_plant)</a>
<a class="sourceLine" id="cb10-301" title="301"></a>
<a class="sourceLine" id="cb10-302" title="302"></a>
<a class="sourceLine" id="cb10-303" title="303"><span class="co">## fish + reptile</span></a>
<a class="sourceLine" id="cb10-304" title="304"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-305" title="305"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-306" title="306"></a>
<a class="sourceLine" id="cb10-307" title="307"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-308" title="308">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-309" title="309">    data.final<span class="op">$</span>cat_taxa_fish_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-310" title="310">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_fish_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-311" title="311">    data.final<span class="op">$</span>cat_taxa_fish[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-312" title="312">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-313" title="313">  }</a>
<a class="sourceLine" id="cb10-314" title="314">}</a>
<a class="sourceLine" id="cb10-315" title="315"></a>
<a class="sourceLine" id="cb10-316" title="316"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-317" title="317"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish)</a>
<a class="sourceLine" id="cb10-318" title="318"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_fish_reptile)</a>
<a class="sourceLine" id="cb10-319" title="319"></a>
<a class="sourceLine" id="cb10-320" title="320"></a>
<a class="sourceLine" id="cb10-321" title="321"><span class="co">## invertebrate + mammal</span></a>
<a class="sourceLine" id="cb10-322" title="322"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-323" title="323"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb10-324" title="324"></a>
<a class="sourceLine" id="cb10-325" title="325"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-326" title="326">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-327" title="327">    data.final<span class="op">$</span>cat_taxa_invertebrate_mammal[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-328" title="328">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_mammal[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-329" title="329">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-330" title="330">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-331" title="331">  }</a>
<a class="sourceLine" id="cb10-332" title="332">}</a>
<a class="sourceLine" id="cb10-333" title="333"></a>
<a class="sourceLine" id="cb10-334" title="334"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-335" title="335"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb10-336" title="336"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_mammal)</a>
<a class="sourceLine" id="cb10-337" title="337"></a>
<a class="sourceLine" id="cb10-338" title="338"></a>
<a class="sourceLine" id="cb10-339" title="339"><span class="co">## invertebrate + plant</span></a>
<a class="sourceLine" id="cb10-340" title="340"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-341" title="341"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb10-342" title="342"></a>
<a class="sourceLine" id="cb10-343" title="343"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-344" title="344">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-345" title="345">    data.final<span class="op">$</span>cat_taxa_invertebrate_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-346" title="346">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-347" title="347">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-348" title="348">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-349" title="349">  }</a>
<a class="sourceLine" id="cb10-350" title="350">}</a>
<a class="sourceLine" id="cb10-351" title="351"></a>
<a class="sourceLine" id="cb10-352" title="352"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-353" title="353"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb10-354" title="354"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_plant)</a>
<a class="sourceLine" id="cb10-355" title="355"></a>
<a class="sourceLine" id="cb10-356" title="356"></a>
<a class="sourceLine" id="cb10-357" title="357"><span class="co">## invertebrate + reptile</span></a>
<a class="sourceLine" id="cb10-358" title="358"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-359" title="359"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb10-360" title="360"></a>
<a class="sourceLine" id="cb10-361" title="361"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-362" title="362">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-363" title="363">    data.final<span class="op">$</span>cat_taxa_invertebrate_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-364" title="364">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-365" title="365">    data.final<span class="op">$</span>cat_taxa_invertebrate[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-366" title="366">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-367" title="367">  }</a>
<a class="sourceLine" id="cb10-368" title="368">}</a>
<a class="sourceLine" id="cb10-369" title="369"></a>
<a class="sourceLine" id="cb10-370" title="370"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-371" title="371"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate)</a>
<a class="sourceLine" id="cb10-372" title="372"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_invertebrate_reptile)</a>
<a class="sourceLine" id="cb10-373" title="373"></a>
<a class="sourceLine" id="cb10-374" title="374"></a>
<a class="sourceLine" id="cb10-375" title="375"><span class="co">## mammal + plant</span></a>
<a class="sourceLine" id="cb10-376" title="376"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-377" title="377"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb10-378" title="378"></a>
<a class="sourceLine" id="cb10-379" title="379"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-380" title="380">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-381" title="381">    data.final<span class="op">$</span>cat_taxa_mammal_plant[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-382" title="382">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal_plant[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-383" title="383">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-384" title="384">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-385" title="385">  }</a>
<a class="sourceLine" id="cb10-386" title="386">}</a>
<a class="sourceLine" id="cb10-387" title="387"></a>
<a class="sourceLine" id="cb10-388" title="388"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-389" title="389"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb10-390" title="390"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal_plant)</a>
<a class="sourceLine" id="cb10-391" title="391"></a>
<a class="sourceLine" id="cb10-392" title="392"></a>
<a class="sourceLine" id="cb10-393" title="393"><span class="co">## mammal + reptile</span></a>
<a class="sourceLine" id="cb10-394" title="394"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-395" title="395"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb10-396" title="396"></a>
<a class="sourceLine" id="cb10-397" title="397"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-398" title="398">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-399" title="399">    data.final<span class="op">$</span>cat_taxa_mammal_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-400" title="400">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_mammal_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-401" title="401">    data.final<span class="op">$</span>cat_taxa_mammal[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-402" title="402">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-403" title="403">  }</a>
<a class="sourceLine" id="cb10-404" title="404">}</a>
<a class="sourceLine" id="cb10-405" title="405"></a>
<a class="sourceLine" id="cb10-406" title="406"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-407" title="407"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal)</a>
<a class="sourceLine" id="cb10-408" title="408"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_mammal_reptile)</a>
<a class="sourceLine" id="cb10-409" title="409"></a>
<a class="sourceLine" id="cb10-410" title="410"></a>
<a class="sourceLine" id="cb10-411" title="411"><span class="co">## plant + reptile</span></a>
<a class="sourceLine" id="cb10-412" title="412"><span class="co">#test</span></a>
<a class="sourceLine" id="cb10-413" title="413"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb10-414" title="414"></a>
<a class="sourceLine" id="cb10-415" title="415"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data.final)){</a>
<a class="sourceLine" id="cb10-416" title="416">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_plant[i]<span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>data.final<span class="op">$</span>cat_taxa_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-417" title="417">    data.final<span class="op">$</span>cat_taxa_plant_reptile[i]=<span class="dv">1</span>}</a>
<a class="sourceLine" id="cb10-418" title="418">  <span class="cf">if</span>(data.final<span class="op">$</span>cat_taxa_plant_reptile[i]<span class="op">==</span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb10-419" title="419">    data.final<span class="op">$</span>cat_taxa_plant[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-420" title="420">    data.final<span class="op">$</span>cat_taxa_reptile[i]=<span class="dv">0</span></a>
<a class="sourceLine" id="cb10-421" title="421">  }</a>
<a class="sourceLine" id="cb10-422" title="422">}</a>
<a class="sourceLine" id="cb10-423" title="423"></a>
<a class="sourceLine" id="cb10-424" title="424"><span class="co">#retest</span></a>
<a class="sourceLine" id="cb10-425" title="425"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant)</a>
<a class="sourceLine" id="cb10-426" title="426"><span class="kw">sum</span>(data.final<span class="op">$</span>cat_taxa_plant_reptile)</a></code></pre></div>
</div>
<div id="export-multi-category-data-for-analysis-and-visualization" class="section level3">
<h3><span class="header-section-number">3.2.6</span> Export Multi-Category Data for Analysis and Visualization</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">write_csv</span>(data.final, <span class="st">&quot;~/Desktop/master_output_data_analysis_v15_filtered.csv&quot;</span>)</a></code></pre></div>
<!--chapter:end:03-multiCatFilter.Rmd-->
</div>
</div>
</div>
<div id="data-analysis-and-visualization-datavis" class="section level1">
<h1><span class="header-section-number">4</span> Data Analysis and Visualization {dataVis}</h1>
<div id="exploratory-visuals" class="section level2">
<h2><span class="header-section-number">4.1</span> Exploratory Visuals</h2>
<div id="grants-with-no-keywords" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Grants with No Keywords</h3>
<p>This is a plot featuring the 50 largest grants that have no keywords associated with them.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">no_keywords &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw">filter</span>(Keywords <span class="op">==</span><span class="st">&quot;[&#39;-&#39;]&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Grant.Amount))</a>
<a class="sourceLine" id="cb12-4" title="4">no_keywords_plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(no_keywords[<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>,],</a>
<a class="sourceLine" id="cb12-5" title="5">                            <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(<span class="kw">row.names</span>(no_keywords[<span class="dv">1</span><span class="op">:</span><span class="dv">50</span>,]), <span class="dt">levels =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">50</span>),</a>
<a class="sourceLine" id="cb12-6" title="6">                                <span class="dt">y =</span> Grant.Amount)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="st">  </span><span class="kw">geom_col</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;No Keyword Biggest Grants (50)&quot;</span>,</a>
<a class="sourceLine" id="cb12-10" title="10">       <span class="dt">x =</span> <span class="st">&quot;Rank&quot;</span>,</a>
<a class="sourceLine" id="cb12-11" title="11">       <span class="dt">y =</span> <span class="st">&quot;Money ($US)&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels =</span> scales<span class="op">::</span>comma)</a>
<a class="sourceLine" id="cb12-13" title="13">no_keywords_plot</a></code></pre></div>
</div>
<div id="all-grants-with-funding" class="section level3">
<h3><span class="header-section-number">4.1.2</span> All Grants with Funding</h3>
<p>Here we lengthen the data to more properly examine and visualize where the money from each grant is being allocated.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">data &lt;-<span class="st"> </span><span class="kw">filter</span>(data, Keywords <span class="op">!=</span><span class="st"> &quot;[&#39;-&#39;]&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">filter</span>(Year.Authorized <span class="op">&lt;</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">  </span><span class="kw">filter</span>(Year.Authorized <span class="op">!=</span><span class="st"> </span><span class="dv">2002</span>)</a>
<a class="sourceLine" id="cb13-4" title="4">data.multi &lt;-<span class="st"> </span><span class="kw">filter</span>(data.multi, Keywords <span class="op">!=</span><span class="st"> &quot;[&#39;-&#39;]&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="st">  </span><span class="kw">filter</span>(Year.Authorized <span class="op">&lt;</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="st">  </span><span class="kw">filter</span>(Year.Authorized <span class="op">!=</span><span class="st"> </span><span class="dv">2002</span>)</a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8">money.data &lt;-<span class="st"> </span>data[,<span class="dv">11</span><span class="op">:</span>(<span class="kw">length</span>(data)<span class="op">-</span><span class="dv">6</span>)]<span class="op">*</span>data[,<span class="dv">7</span>]</a>
<a class="sourceLine" id="cb13-9" title="9">money.data &lt;-<span class="st"> </span><span class="kw">mutate</span>(money.data, <span class="dt">Year.Authorized =</span> data<span class="op">$</span>Year.Authorized)</a>
<a class="sourceLine" id="cb13-10" title="10"></a>
<a class="sourceLine" id="cb13-11" title="11">by.year.money &lt;-<span class="st"> </span>money.data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="st">  </span><span class="kw">group_by</span>(Year.Authorized) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="st">  </span><span class="kw">summarize_at</span>(<span class="kw">vars</span>(cat_act_area<span class="op">:</span>cat_taxa_other), sum, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>Year.Authorized, <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Amount&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percent =</span> Amount<span class="op">/</span><span class="kw">sum</span>(Amount))</a></code></pre></div>
</div>
<div id="bio-subset" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Bio Subset</h3>
<p>Here we remove those climate/energy grants that do not contain biodiversity conservation keywords.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># Single Category Data</span></a>
<a class="sourceLine" id="cb14-2" title="2">data_bio<span class="fl">.1</span> &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(biodiv.bio.taxa.hab_cat), <span class="kw">any_vars</span>(.<span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)) </a>
<a class="sourceLine" id="cb14-4" title="4">data_non.bio<span class="fl">.1</span> &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(biodiv.bio.taxa.hab_cat), <span class="kw">all_vars</span>(. <span class="op">==</span><span class="st"> </span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-6" title="6"></a>
<a class="sourceLine" id="cb14-7" title="7">data_bio<span class="fl">.2</span> &lt;-<span class="st"> </span>data_non.bio<span class="fl">.1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(clim.energy_cat), <span class="kw">all_vars</span>(.<span class="op">==</span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-9" title="9">data_non.bio<span class="fl">.2</span> &lt;-<span class="st"> </span>data_non.bio<span class="fl">.1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(clim.energy_cat), <span class="kw">any_vars</span>(.<span class="op">&gt;</span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-11" title="11"></a>
<a class="sourceLine" id="cb14-12" title="12">data_bio &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(data_bio<span class="fl">.1</span>, data_bio<span class="fl">.2</span>)</a>
<a class="sourceLine" id="cb14-13" title="13">data_non.bio &lt;-<span class="st"> </span>data_non.bio<span class="fl">.2</span></a>
<a class="sourceLine" id="cb14-14" title="14"></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co"># Multi-category Data</span></a>
<a class="sourceLine" id="cb14-16" title="16">data.multi_bio<span class="fl">.1</span> &lt;-<span class="st"> </span>data.multi <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(biodiv.bio.taxa.hab_cat_multi), <span class="kw">any_vars</span>(.<span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>)) </a>
<a class="sourceLine" id="cb14-18" title="18">data.multi_non.bio<span class="fl">.1</span> &lt;-<span class="st"> </span>data.multi <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(biodiv.bio.taxa.hab_cat_multi), <span class="kw">all_vars</span>(. <span class="op">==</span><span class="st"> </span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-20" title="20"></a>
<a class="sourceLine" id="cb14-21" title="21">data.multi_bio<span class="fl">.2</span> &lt;-<span class="st"> </span>data.multi_non.bio<span class="fl">.1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(cat_threat_climate, cat_threat_energytransport),</a>
<a class="sourceLine" id="cb14-23" title="23">            <span class="kw">all_vars</span>(.<span class="op">==</span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-24" title="24">data.multi_non.bio<span class="fl">.2</span> &lt;-<span class="st"> </span>data.multi_non.bio<span class="fl">.1</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-25" title="25"><span class="st">  </span><span class="kw">filter_at</span>(<span class="kw">vars</span>(cat_threat_climate, cat_threat_energytransport),</a>
<a class="sourceLine" id="cb14-26" title="26">            <span class="kw">any_vars</span>(.<span class="op">&gt;</span><span class="dv">0</span>))</a>
<a class="sourceLine" id="cb14-27" title="27"></a>
<a class="sourceLine" id="cb14-28" title="28">data.multi_bio &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(data.multi_bio<span class="fl">.1</span>, data.multi_bio<span class="fl">.2</span>)</a>
<a class="sourceLine" id="cb14-29" title="29">data.multi_non.bio &lt;-<span class="st"> </span>data.multi_non.bio<span class="fl">.2</span></a></code></pre></div>
</div>
<div id="money-data" class="section level3">
<h3><span class="header-section-number">4.1.4</span> Money Data</h3>
<p>Here we further subset the lengthened dataset featuring all grants that have associated funding and break them down at an annual resolution Those subsets include the amount of money allocated to each category per year, the amount of non-biodiversity funding by year, and the amount of money across multi-category grants per year.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># Single Category Data</span></a>
<a class="sourceLine" id="cb15-2" title="2">money.data_bio &lt;-<span class="st"> </span>data_bio[,<span class="dv">11</span><span class="op">:</span>(<span class="kw">length</span>(data_bio)<span class="op">-</span><span class="dv">6</span>)]<span class="op">*</span>data_bio[,<span class="dv">7</span>]</a>
<a class="sourceLine" id="cb15-3" title="3">money.data_bio &lt;-<span class="st"> </span><span class="kw">mutate</span>(money.data_bio,</a>
<a class="sourceLine" id="cb15-4" title="4">                         <span class="dt">Year.Authorized =</span> data_bio<span class="op">$</span>Year.Authorized,</a>
<a class="sourceLine" id="cb15-5" title="5">                         <span class="dt">Num.Thr =</span> data_bio<span class="op">$</span>Num.Thr)</a>
<a class="sourceLine" id="cb15-6" title="6"></a>
<a class="sourceLine" id="cb15-7" title="7">by.year.money_bio &lt;-<span class="st"> </span>money.data_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="st">  </span><span class="kw">group_by</span>(Year.Authorized) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="st">  </span><span class="kw">summarize_at</span>(<span class="kw">vars</span>(cat_act_area<span class="op">:</span>cat_taxa_other), sum, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-10" title="10"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>Year.Authorized, <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Amount&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="st">  </span><span class="kw">group_by</span>(Year.Authorized) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ann.percent =</span> Amount<span class="op">/</span><span class="kw">sum</span>(Amount)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percent =</span> Amount<span class="op">/</span><span class="kw">sum</span>(Amount))</a>
<a class="sourceLine" id="cb15-15" title="15"></a>
<a class="sourceLine" id="cb15-16" title="16">money.data_non.bio &lt;-<span class="st"> </span>data_non.bio[,<span class="dv">11</span><span class="op">:</span>(<span class="kw">length</span>(data_non.bio)<span class="op">-</span><span class="dv">6</span>)]<span class="op">*</span>data_non.bio[,<span class="dv">7</span>]</a>
<a class="sourceLine" id="cb15-17" title="17">money.data_non.bio &lt;-<span class="st"> </span><span class="kw">mutate</span>(money.data_non.bio, </a>
<a class="sourceLine" id="cb15-18" title="18">                             <span class="dt">Year.Authorized =</span> data_non.bio<span class="op">$</span>Year.Authorized,</a>
<a class="sourceLine" id="cb15-19" title="19">                             <span class="dt">Num.Thr =</span> data_non.bio<span class="op">$</span>Num.Thr)</a>
<a class="sourceLine" id="cb15-20" title="20"></a>
<a class="sourceLine" id="cb15-21" title="21">by.year.money_non.bio &lt;-<span class="st"> </span>money.data_non.bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-22" title="22"><span class="st">  </span><span class="kw">group_by</span>(Year.Authorized) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-23" title="23"><span class="st">  </span><span class="kw">summarize_at</span>(<span class="kw">vars</span>(cat_act_area<span class="op">:</span>cat_threat_overexp_pollution), sum, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-24" title="24"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>Year.Authorized, <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Amount&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-25" title="25"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-26" title="26"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percent =</span> Amount<span class="op">/</span><span class="kw">sum</span>(Amount))</a>
<a class="sourceLine" id="cb15-27" title="27"></a>
<a class="sourceLine" id="cb15-28" title="28"><span class="co"># Multi-category Data</span></a>
<a class="sourceLine" id="cb15-29" title="29">money.data.multi_bio &lt;-<span class="st"> </span>data.multi_bio[,<span class="dv">11</span><span class="op">:</span>(<span class="kw">length</span>(data.multi_bio)<span class="op">-</span><span class="dv">6</span>)]<span class="op">*</span>data.multi_bio[,<span class="dv">7</span>]</a>
<a class="sourceLine" id="cb15-30" title="30">money.data.multi_bio &lt;-<span class="st"> </span><span class="kw">mutate</span>(money.data.multi_bio, </a>
<a class="sourceLine" id="cb15-31" title="31">                               <span class="dt">Year.Authorized =</span> data.multi_bio<span class="op">$</span>Year.Authorized,</a>
<a class="sourceLine" id="cb15-32" title="32">                               <span class="dt">Num.Thr =</span> data.multi_bio<span class="op">$</span>Num.Thr)</a>
<a class="sourceLine" id="cb15-33" title="33"></a>
<a class="sourceLine" id="cb15-34" title="34">by.year.money.multi_bio &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-35" title="35"><span class="st">  </span><span class="kw">group_by</span>(Year.Authorized) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-36" title="36"><span class="st">  </span><span class="kw">summarize_at</span>(<span class="kw">vars</span>(cat_act_area<span class="op">:</span>cat_threat_pollution), sum, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-37" title="37"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>Year.Authorized, <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Amount&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-38" title="38"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-39" title="39"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percent =</span> Amount<span class="op">/</span><span class="kw">sum</span>(Amount))</a></code></pre></div>
</div>
</div>
<div id="manuscript-figures" class="section level2">
<h2><span class="header-section-number">4.2</span> Manuscript Figures</h2>
<div id="figure-1-proportion-of-money-vs.-species-threatened" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Figure 1: Proportion of Money vs. Species Threatened</h3>
<p><strong>INSERT FIGURE CAPTION FROM MANUSCRIPT</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">fig.<span class="fl">1.</span>money_bio &lt;-<span class="st"> </span>by.year.money_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="st">  </span><span class="kw">filter</span>(Category <span class="op">%in%</span><span class="st"> </span>u.threat_cat) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Total =</span> <span class="kw">sum</span>(Amount))</a>
<a class="sourceLine" id="cb16-5" title="5"></a>
<a class="sourceLine" id="cb16-6" title="6">fig.<span class="fl">1.</span>species &lt;-<span class="st"> </span>maxwell <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Category, n_species_threatened) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Total =</span> <span class="kw">sum</span>(n_species_threatened)) </a>
<a class="sourceLine" id="cb16-10" title="10"></a>
<a class="sourceLine" id="cb16-11" title="11">rawFrame &lt;-<span class="st"> </span><span class="kw">left_join</span>(fig.<span class="fl">1.</span>money_bio, fig.<span class="fl">1.</span>species, <span class="dt">by =</span> <span class="st">&quot;Category&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rawMoney =</span> Total.x) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># Total Money</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rawSpecies =</span> Total.y) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Total Species</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Category, rawMoney, rawSpecies)</a>
<a class="sourceLine" id="cb16-15" title="15"></a>
<a class="sourceLine" id="cb16-16" title="16">fig.<span class="fl">1.</span>data_bio &lt;-<span class="st"> </span><span class="kw">left_join</span>(fig.<span class="fl">1.</span>money_bio, fig.<span class="fl">1.</span>species, <span class="dt">by =</span> <span class="st">&quot;Category&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-17" title="17"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Money =</span> (Total.x<span class="op">/</span><span class="kw">sum</span>(Total.x))<span class="op">*</span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># Percentage of Total Money</span></a>
<a class="sourceLine" id="cb16-18" title="18"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Species =</span> (Total.y<span class="op">/</span><span class="kw">sum</span>(Total.y))<span class="op">*</span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Percentage of Total Species</span></a>
<a class="sourceLine" id="cb16-19" title="19"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Category, Money, Species) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-20" title="20"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="kw">c</span>(Money, Species), <span class="dt">names_to =</span> <span class="st">&quot;is.Money&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Amount&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-21" title="21"><span class="st">  </span><span class="kw">left_join</span>(rawFrame, <span class="dt">by =</span> <span class="st">&quot;Category&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-22" title="22"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rawMoney =</span> <span class="kw">ifelse</span>(is.Money <span class="op">==</span><span class="st"> &quot;Species&quot;</span>, <span class="ot">NA</span>, rawMoney)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-23" title="23"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rawSpecies=</span> <span class="kw">ifelse</span>(is.Money <span class="op">==</span><span class="st"> &quot;Money&quot;</span>, <span class="ot">NA</span>, rawSpecies)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-24" title="24"><span class="st">  </span><span class="kw">replace_na</span>(<span class="kw">list</span>(<span class="dt">rawMoney =</span> <span class="st">&quot;&quot;</span>, <span class="dt">rawSpecies =</span> <span class="st">&quot;&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-25" title="25"><span class="st">  </span><span class="kw">unite</span>(<span class="st">&quot;rawValue&quot;</span>, rawMoney<span class="op">:</span>rawSpecies, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>, <span class="dt">remove =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-26" title="26"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rawValue =</span> <span class="kw">as.numeric</span>(rawValue),</a>
<a class="sourceLine" id="cb16-27" title="27">         <span class="dt">rawLabels =</span> <span class="kw">comma</span>(rawValue))</a>
<a class="sourceLine" id="cb16-28" title="28">fig.<span class="fl">1.</span>data_bio<span class="op">$</span>rawLabels[<span class="kw">c</span>(<span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">11</span>,<span class="dv">2</span>))] &lt;-<span class="st"> </span><span class="kw">str_glue</span>(<span class="st">&quot;${round(rawFrame$rawMoney/1e6)}m&quot;</span>)</a>
<a class="sourceLine" id="cb16-29" title="29"><span class="co"># fig.1.data_bio$rawLabels[c(seq(2,12,2))] &lt;- rawFrame$rawSpecies</span></a>
<a class="sourceLine" id="cb16-30" title="30"></a>
<a class="sourceLine" id="cb16-31" title="31">fig.<span class="fl">1.</span>plot_bio &lt;-<span class="st"> </span><span class="kw">ggplot</span>(fig.<span class="fl">1.</span>data_bio, </a>
<a class="sourceLine" id="cb16-32" title="32">                      <span class="kw">aes</span>(<span class="dt">fill=</span>is.Money, </a>
<a class="sourceLine" id="cb16-33" title="33">                          <span class="dt">y=</span>Amount, </a>
<a class="sourceLine" id="cb16-34" title="34">                          <span class="dt">x=</span>Category)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-35" title="35"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">position=</span><span class="st">&quot;dodge&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-36" title="36"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Threat Category&quot;</span>, </a>
<a class="sourceLine" id="cb16-37" title="37">       <span class="dt">y=</span><span class="st">&quot;Percentage&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb16-38" title="38"><span class="st">       </span><span class="co"># title=&quot;% Money Allocated vs. % Species Threatened (IUCN) by Unique Threats&quot;) +</span></a>
<a class="sourceLine" id="cb16-39" title="39"><span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">labels=</span>u.threat_list) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-40" title="40"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="co"># values = c(&quot;#556B2F&quot;, &quot;#8f3c36&quot;),</span></a>
<a class="sourceLine" id="cb16-41" title="41">                    <span class="dt">values =</span> <span class="kw">alpha</span>(<span class="kw">c</span>(<span class="st">&quot;darkgreen&quot;</span>, <span class="st">&quot;orangered4&quot;</span>), <span class="fl">0.9</span>),</a>
<a class="sourceLine" id="cb16-42" title="42">                    <span class="co"># values = c(&quot;#556B2F&quot;, &quot;#708090&quot;),</span></a>
<a class="sourceLine" id="cb16-43" title="43">                    <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Money ($USD Million)&quot;</span>, <span class="st">&quot;# Threatened Species&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-44" title="44"><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">position =</span> <span class="kw">position_dodge</span>(<span class="dt">width=</span> <span class="dv">1</span>), </a>
<a class="sourceLine" id="cb16-45" title="45">            <span class="kw">aes</span>(<span class="dt">label =</span> rawLabels, <span class="dt">hjust =</span> <span class="fl">0.5</span>, <span class="dt">vjust =</span> <span class="fl">-0.5</span>), <span class="dt">angle=</span><span class="dv">0</span>, <span class="dt">size=</span><span class="dv">6</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-46" title="46"><span class="st">  </span><span class="kw">ylim</span>(<span class="dv">0</span>, <span class="dv">50</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-47" title="47"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-48" title="48"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>), </a>
<a class="sourceLine" id="cb16-49" title="49">        <span class="dt">axis.ticks.length.x =</span> <span class="kw">unit</span>(.<span class="dv">5</span>, <span class="st">&quot;cm&quot;</span>),</a>
<a class="sourceLine" id="cb16-50" title="50">        <span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</a>
<a class="sourceLine" id="cb16-51" title="51">        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb16-52" title="52">        <span class="dt">legend.key.size =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</a>
<a class="sourceLine" id="cb16-53" title="53">        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>))</a>
<a class="sourceLine" id="cb16-54" title="54"></a>
<a class="sourceLine" id="cb16-55" title="55"><span class="co"># ggsave(fig.1.plot_bio, filename = &quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/money_species_comparison.png&quot;, width=15, height=7,dpi = 300)</span></a>
<a class="sourceLine" id="cb16-56" title="56"></a>
<a class="sourceLine" id="cb16-57" title="57">fig.<span class="fl">1.</span>plot_bio</a></code></pre></div>
</div>
<div id="figure-2-amount-of-money-allocated-across-unique-threat-categories-per-year" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Figure 2: Amount of Money Allocated Across Unique Threat Categories per Year</h3>
<p><strong>INSERT FIGURE CAPTION FROM MANUSCRIPT</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">threat_temporal.data &lt;-<span class="st"> </span>by.year.money_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span><span class="kw">filter</span>(Category <span class="op">%in%</span><span class="st"> </span>u.threat_cat)</a>
<a class="sourceLine" id="cb17-3" title="3"></a>
<a class="sourceLine" id="cb17-4" title="4">threat_temporal.plot &lt;-<span class="st"> </span><span class="kw">ggplot</span>(threat_temporal.data, </a>
<a class="sourceLine" id="cb17-5" title="5">                <span class="kw">aes</span>(<span class="dt">y =</span> Amount, </a>
<a class="sourceLine" id="cb17-6" title="6">                    <span class="dt">x =</span> Year.Authorized,</a>
<a class="sourceLine" id="cb17-7" title="7">                    <span class="dt">color =</span> Category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="st">  </span><span class="co">#geom_point() +</span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">linetype =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="st">  </span><span class="co"># geom_smooth(size = 1, aes(fill = Category), show.legend = FALSE) +</span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> cat_colors22[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">13</span>,<span class="dv">11</span>,<span class="dv">20</span>,<span class="dv">5</span>,<span class="dv">18</span>)],</a>
<a class="sourceLine" id="cb17-13" title="13">                     <span class="dt">name=</span><span class="st">&quot;Threat Category&quot;</span>,</a>
<a class="sourceLine" id="cb17-14" title="14">                     <span class="dt">labels=</span>u.threat_list) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> cat_colors7) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Year&quot;</span>, </a>
<a class="sourceLine" id="cb17-17" title="17">       <span class="dt">y=</span><span class="st">&quot;Money ($US Million)&quot;</span>, </a>
<a class="sourceLine" id="cb17-18" title="18">       <span class="dt">title=</span><span class="st">&quot;Amount of Money Allocated Across Unique Threat Categories per Year&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-19" title="19"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="co">#labels = waiver(),</span></a>
<a class="sourceLine" id="cb17-20" title="20">                     <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="fl">50e6</span>,<span class="fl">10e7</span>),</a>
<a class="sourceLine" id="cb17-21" title="21">                     <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;0&quot;</span>,<span class="st">&quot;50&quot;</span>,<span class="st">&quot;100&quot;</span>),</a>
<a class="sourceLine" id="cb17-22" title="22">                     <span class="dt">position =</span> <span class="st">&quot;right&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-23" title="23"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</a>
<a class="sourceLine" id="cb17-24" title="24">        <span class="dt">axis.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">16</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb17-25" title="25">        <span class="dt">legend.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">14</span>),</a>
<a class="sourceLine" id="cb17-26" title="26">        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>),</a>
<a class="sourceLine" id="cb17-27" title="27">        <span class="dt">legend.key.width =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</a>
<a class="sourceLine" id="cb17-28" title="28">        <span class="co"># legend.box.spacing = unit(1,&quot;cm&quot;),</span></a>
<a class="sourceLine" id="cb17-29" title="29">        <span class="dt">legend.spacing.x =</span> <span class="kw">unit</span>(<span class="dv">1</span>,<span class="st">&quot;cm&quot;</span>),</a>
<a class="sourceLine" id="cb17-30" title="30">        <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</a>
<a class="sourceLine" id="cb17-31" title="31">        <span class="co"># legend.background = element_rect(color = &quot;black&quot;, size = 1.2, fill = NA))</span></a>
<a class="sourceLine" id="cb17-32" title="32"></a>
<a class="sourceLine" id="cb17-33" title="33"><span class="co"># ggsave(threat_temporal.plot, filename = &quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/threat_temporal.png&quot;, width=12, height=7,dpi = 300)</span></a>
<a class="sourceLine" id="cb17-34" title="34"></a>
<a class="sourceLine" id="cb17-35" title="35"></a>
<a class="sourceLine" id="cb17-36" title="36">threat_temporal.plot</a></code></pre></div>
</div>
<div id="figure-3-taxathreat-maxwell-comparison" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Figure 3: Taxa/Threat Maxwell Comparison</h3>
<p><strong>INSERT FIGURE CAPTION FROM MANUSCRIPT</strong>
#### Coercing Maxwell’s species designations to merge with ours
We are merging the various taxa catgories used by Maxwell et al. to examine the amount of funding disbursed to various taxa. Maxwell et al.’s taxonic designations are at a higher resolution than the what we need, so we are altering them to fit the taxonomic scale we’re operating at.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">maxwell.s4 &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;~/Columbia E3B/Conservation Group/Maxwell et al table S4.csv&quot;</span>)</a>
<a class="sourceLine" id="cb18-2" title="2"><span class="kw">names</span>(maxwell.s4)</a>
<a class="sourceLine" id="cb18-3" title="3"></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="co"># Our species: Amphibians, Birds, Fish, Invertebrates, Mammals, Plants, Reptiles</span></a>
<a class="sourceLine" id="cb18-5" title="5"></a>
<a class="sourceLine" id="cb18-6" title="6">our.species &lt;-<span class="st"> </span>maxwell.s4 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Amphibians =</span> Amphibia,</a>
<a class="sourceLine" id="cb18-9" title="9">         <span class="dt">Birds =</span> Aves,</a>
<a class="sourceLine" id="cb18-10" title="10">         <span class="dt">Fish =</span> Actinopterygii <span class="op">+</span><span class="st"> </span>Chondrichthyes,</a>
<a class="sourceLine" id="cb18-11" title="11">         <span class="dt">Invertebrates =</span> Anthozoa <span class="op">+</span><span class="st"> </span>Gastropoda <span class="op">+</span><span class="st"> </span>Hydrozoa <span class="op">+</span><span class="st"> </span>Malacostraca <span class="op">+</span><span class="st"> </span>Myxini,</a>
<a class="sourceLine" id="cb18-12" title="12">         <span class="dt">Mammals =</span> Mammalia,</a>
<a class="sourceLine" id="cb18-13" title="13">         <span class="dt">Plants =</span> Cycadopsida <span class="op">+</span><span class="st"> </span>Liliopsida <span class="op">+</span><span class="st"> </span>Magnoliopsida <span class="op">+</span><span class="st"> </span>Pinopsida,</a>
<a class="sourceLine" id="cb18-14" title="14">         <span class="dt">Reptiles =</span> Reptilia) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">19</span><span class="op">:</span><span class="kw">ncol</span>(.), <span class="dv">18</span>))</a>
<a class="sourceLine" id="cb18-16" title="16">our.species</a></code></pre></div>
<div id="figure-3" class="section level4">
<h4><span class="header-section-number">4.2.3.1</span> Figure 3</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="co"># Preparing maxwell data</span></a>
<a class="sourceLine" id="cb19-2" title="2">fig.<span class="fl">3.</span>maxwell_data &lt;-<span class="st"> </span>our.species <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">11</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(Total<span class="op">:</span>Reptiles), sum) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dv">3</span><span class="op">:</span><span class="kw">length</span>(.)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Total.maxwell =</span> <span class="kw">rowSums</span>(.)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dv">8</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="st">  </span><span class="kw">transmute_at</span>(<span class="kw">vars</span>(<span class="op">-</span>Total.maxwell), <span class="op">~</span><span class="st"> </span>(.<span class="op">/</span>Total.maxwell)<span class="op">*</span><span class="dv">100</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Threat =</span> u.threat_list) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dv">8</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-12" title="12"><span class="st">  </span><span class="kw">pivot_longer</span>(Amphibians<span class="op">:</span>Reptiles, <span class="dt">names_to =</span> <span class="st">&quot;Taxa&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Percent&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-13" title="13"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Source =</span> <span class="st">&quot;IUCN&quot;</span>, <span class="dt">direction =</span> <span class="dv">-1</span>, <span class="dt">alpha =</span> <span class="fl">0.9</span>)</a>
<a class="sourceLine" id="cb19-14" title="14"></a>
<a class="sourceLine" id="cb19-15" title="15"></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="co"># Preparing money data</span></a>
<a class="sourceLine" id="cb19-17" title="17">taxa_climate &lt;-<span class="st"> </span>money.data_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-18" title="18"><span class="st">  </span><span class="kw">filter</span>(cat_threat_climate <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-19" title="19"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-20" title="20"><span class="st">  </span><span class="kw">pivot_longer</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile, </a>
<a class="sourceLine" id="cb19-21" title="21">               <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Money&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-22" title="22"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-23" title="23"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalAmount =</span> <span class="kw">sum</span>(Money)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-24" title="24"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalAmount<span class="op">/</span><span class="kw">sum</span>(totalAmount)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-25" title="25"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(perc) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-26" title="26"><span class="st">  </span><span class="kw">t</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-27" title="27"><span class="st">  </span><span class="kw">as.data.frame</span>(<span class="dt">row.names =</span> <span class="st">&quot;cat_threat_climate&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-28" title="28"><span class="st">  `</span><span class="dt">colnames&lt;-</span><span class="st">`</span> (u.taxa_list)</a>
<a class="sourceLine" id="cb19-29" title="29"></a>
<a class="sourceLine" id="cb19-30" title="30">taxa_energy &lt;-<span class="st"> </span>money.data_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-31" title="31"><span class="st">  </span><span class="kw">filter</span>(cat_threat_energytransport <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-32" title="32"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-33" title="33"><span class="st">  </span><span class="kw">pivot_longer</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile, </a>
<a class="sourceLine" id="cb19-34" title="34">               <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Money&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-35" title="35"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-36" title="36"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalAmount =</span> <span class="kw">sum</span>(Money)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-37" title="37"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalAmount<span class="op">/</span><span class="kw">sum</span>(totalAmount)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-38" title="38"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(perc) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-39" title="39"><span class="st">  </span><span class="kw">t</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-40" title="40"><span class="st">  </span><span class="kw">as.data.frame</span>(<span class="dt">row.names =</span> <span class="st">&quot;cat_threat_energytransport&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-41" title="41"><span class="st">  `</span><span class="dt">colnames&lt;-</span><span class="st">`</span> (u.taxa_list)</a>
<a class="sourceLine" id="cb19-42" title="42"></a>
<a class="sourceLine" id="cb19-43" title="43">taxa_habitat &lt;-<span class="st"> </span>money.data_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-44" title="44"><span class="st">  </span><span class="kw">filter</span>(cat_threat_habitat <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-45" title="45"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-46" title="46"><span class="st">  </span><span class="kw">pivot_longer</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile, </a>
<a class="sourceLine" id="cb19-47" title="47">               <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Money&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-48" title="48"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-49" title="49"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalAmount =</span> <span class="kw">sum</span>(Money)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-50" title="50"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalAmount<span class="op">/</span><span class="kw">sum</span>(totalAmount)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-51" title="51"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(perc) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-52" title="52"><span class="st">  </span><span class="kw">t</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-53" title="53"><span class="st">  </span><span class="kw">as.data.frame</span>(<span class="dt">row.names =</span> <span class="st">&quot;cat_threat_habitat&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-54" title="54"><span class="st">  `</span><span class="dt">colnames&lt;-</span><span class="st">`</span> (u.taxa_list)</a>
<a class="sourceLine" id="cb19-55" title="55"></a>
<a class="sourceLine" id="cb19-56" title="56">taxa_inv &lt;-<span class="st"> </span>money.data_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-57" title="57"><span class="st">  </span><span class="kw">filter</span>(cat_threat_inv_spec <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-58" title="58"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-59" title="59"><span class="st">  </span><span class="kw">pivot_longer</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile, </a>
<a class="sourceLine" id="cb19-60" title="60">               <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Money&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-61" title="61"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-62" title="62"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalAmount =</span> <span class="kw">sum</span>(Money)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-63" title="63"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalAmount<span class="op">/</span><span class="kw">sum</span>(totalAmount)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-64" title="64"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(perc) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-65" title="65"><span class="st">  </span><span class="kw">t</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-66" title="66"><span class="st">  </span><span class="kw">as.data.frame</span>(<span class="dt">row.names =</span> <span class="st">&quot;cat_threat_inv_spec&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-67" title="67"><span class="st">  `</span><span class="dt">colnames&lt;-</span><span class="st">`</span> (u.taxa_list)</a>
<a class="sourceLine" id="cb19-68" title="68"></a>
<a class="sourceLine" id="cb19-69" title="69">taxa_overexp &lt;-<span class="st"> </span>money.data_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-70" title="70"><span class="st">  </span><span class="kw">filter</span>(cat_threat_overexp <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-71" title="71"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-72" title="72"><span class="st">  </span><span class="kw">pivot_longer</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile, </a>
<a class="sourceLine" id="cb19-73" title="73">               <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Money&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-74" title="74"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-75" title="75"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalAmount =</span> <span class="kw">sum</span>(Money)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-76" title="76"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalAmount<span class="op">/</span><span class="kw">sum</span>(totalAmount)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-77" title="77"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(perc) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-78" title="78"><span class="st">  </span><span class="kw">t</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-79" title="79"><span class="st">  </span><span class="kw">as.data.frame</span>(<span class="dt">row.names =</span> <span class="st">&quot;cat_threat_overexp&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-80" title="80"><span class="st">  `</span><span class="dt">colnames&lt;-</span><span class="st">`</span> (u.taxa_list)</a>
<a class="sourceLine" id="cb19-81" title="81"></a>
<a class="sourceLine" id="cb19-82" title="82">taxa_pollution &lt;-<span class="st"> </span>money.data_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-83" title="83"><span class="st">  </span><span class="kw">filter</span>(cat_threat_pollution <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-84" title="84"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-85" title="85"><span class="st">  </span><span class="kw">pivot_longer</span>(cat_taxa_amphibian<span class="op">:</span>cat_taxa_reptile, </a>
<a class="sourceLine" id="cb19-86" title="86">               <span class="dt">names_to =</span> <span class="st">&quot;Category&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Money&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-87" title="87"><span class="st">  </span><span class="kw">group_by</span>(Category) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-88" title="88"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalAmount =</span> <span class="kw">sum</span>(Money)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-89" title="89"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalAmount<span class="op">/</span><span class="kw">sum</span>(totalAmount)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-90" title="90"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(perc) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-91" title="91"><span class="st">  </span><span class="kw">t</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-92" title="92"><span class="st">  </span><span class="kw">as.data.frame</span>(<span class="dt">row.names =</span> <span class="st">&quot;cat_threat_pollution&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-93" title="93"><span class="st">  `</span><span class="dt">colnames&lt;-</span><span class="st">`</span> (u.taxa_list)</a>
<a class="sourceLine" id="cb19-94" title="94"></a>
<a class="sourceLine" id="cb19-95" title="95">fig.<span class="fl">3.</span>money_data &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(taxa_climate, taxa_energy, taxa_habitat, </a>
<a class="sourceLine" id="cb19-96" title="96">                         taxa_inv, taxa_overexp, taxa_pollution) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-97" title="97"><span class="st">  </span><span class="kw">transmute_all</span>(<span class="op">~</span>.<span class="op">*</span><span class="dv">100</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-98" title="98"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Threat =</span> u.threat_list) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-99" title="99"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dv">8</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">7</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-100" title="100"><span class="st">  </span><span class="kw">pivot_longer</span>(Amphibians<span class="op">:</span>Reptiles, <span class="dt">names_to =</span> <span class="st">&quot;Taxa&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Percent&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-101" title="101"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Source =</span> <span class="st">&quot;Money&quot;</span>, <span class="dt">direction =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb19-102" title="102"></a>
<a class="sourceLine" id="cb19-103" title="103"><span class="co">### 1 plot</span></a>
<a class="sourceLine" id="cb19-104" title="104">fig.<span class="fl">3.</span>data &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(fig.<span class="fl">3.</span>money_data, fig.<span class="fl">3.</span>maxwell_data) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-105" title="105"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Percent =</span> Percent <span class="op">*</span><span class="st"> </span>direction,</a>
<a class="sourceLine" id="cb19-106" title="106">         <span class="dt">Taxa =</span> <span class="kw">factor</span>(Taxa, </a>
<a class="sourceLine" id="cb19-107" title="107">                       <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Reptiles&quot;</span>, <span class="st">&quot;Amphibians&quot;</span>, <span class="st">&quot;Invertebrates&quot;</span>, </a>
<a class="sourceLine" id="cb19-108" title="108">                                  <span class="st">&quot;Birds&quot;</span>, <span class="st">&quot;Mammals&quot;</span>, <span class="st">&quot;Fish&quot;</span>, <span class="st">&quot;Plants&quot;</span>),</a>
<a class="sourceLine" id="cb19-109" title="109">                       <span class="dt">ordered =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb19-110" title="110">         <span class="dt">Threat =</span> <span class="kw">factor</span>(Threat,</a>
<a class="sourceLine" id="cb19-111" title="111">                         <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Climate Change&quot;</span>, <span class="st">&quot;Overexploitation&quot;</span>,</a>
<a class="sourceLine" id="cb19-112" title="112">                                    <span class="st">&quot;Habitat Loss&quot;</span>, <span class="st">&quot;Energy &amp; Transportation&quot;</span>,</a>
<a class="sourceLine" id="cb19-113" title="113">                                    <span class="st">&quot;Pollution&quot;</span>, <span class="st">&quot;Invasive Species&quot;</span>),</a>
<a class="sourceLine" id="cb19-114" title="114">                         <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb19-115" title="115">  )</a>
<a class="sourceLine" id="cb19-116" title="116"></a>
<a class="sourceLine" id="cb19-117" title="117">fig<span class="fl">.3</span> &lt;-<span class="st"> </span><span class="kw">ggplot</span>(fig.<span class="fl">3.</span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Taxa <span class="op">!=</span><span class="st"> &quot;Reptiles&quot;</span>),</a>
<a class="sourceLine" id="cb19-118" title="118">                <span class="kw">aes</span>(<span class="dt">x =</span> Taxa, <span class="dt">y =</span> Percent, <span class="dt">fill =</span> Taxa)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-119" title="119"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">show.legend =</span> F , <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-120" title="120"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>, <span class="dt">size =</span> <span class="fl">1.2</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-121" title="121"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> cat_colors22[<span class="kw">c</span>(<span class="dv">9</span>,<span class="dv">20</span>,<span class="dv">19</span>,<span class="dv">15</span>,<span class="dv">7</span>,<span class="dv">11</span>)],</a>
<a class="sourceLine" id="cb19-122" title="122">                    <span class="dt">name =</span> <span class="st">&quot;Taxa&quot;</span>,</a>
<a class="sourceLine" id="cb19-123" title="123">                    <span class="dt">labels =</span> u.taxa_list) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-124" title="124"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Threat) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-125" title="125"><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb19-126" title="126"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.ticks.y=</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb19-127" title="127">        <span class="co"># axis.text.y = element_text(size = 10, face = &quot;bold&quot;),</span></a>
<a class="sourceLine" id="cb19-128" title="128">        <span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb19-129" title="129">        <span class="co"># axis.text.y = element_text(size = 12),</span></a>
<a class="sourceLine" id="cb19-130" title="130">        <span class="co"># axis.title = element_text(size = 16, face = &quot;bold&quot;),</span></a>
<a class="sourceLine" id="cb19-131" title="131">        <span class="dt">axis.ticks.x=</span><span class="kw">element_line</span>(<span class="dt">color=</span><span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb19-132" title="132">        <span class="dt">strip.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb19-133" title="133">        <span class="dt">strip.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-134" title="134"><span class="st">  </span><span class="kw">ylim</span>(<span class="op">-</span><span class="dv">90</span>,<span class="dv">90</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-135" title="135"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Percent of Taxa Threatened (IUCN) by vs. Funded for Unique Threats&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-136" title="136"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;% Taxa Threatened   |    % Funding to Taxa&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-137" title="137"><span class="st">  </span><span class="kw">coord_flip</span>()</a>
<a class="sourceLine" id="cb19-138" title="138"></a>
<a class="sourceLine" id="cb19-139" title="139"><span class="co"># ggsave(fig.3, filename = &quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/taxa_threat_comparison.png&quot;, width=12, height=7,dpi = 300)</span></a>
<a class="sourceLine" id="cb19-140" title="140"></a>
<a class="sourceLine" id="cb19-141" title="141">fig<span class="fl">.3</span></a></code></pre></div>
</div>
</div>
<div id="figure-4-network-analysis" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Figure 4: Network Analysis</h3>
</div>
</div>
</div>
<div id="figure-4-threats-network-analysis" class="section level1">
<h1><span class="header-section-number">5</span> Figure 4: Threats Network Analysis</h1>
<p>The code presented here for Figure 4 generates the pie charts for each threat category that can be seen in the full network analysis figure. The actual network analysis was conducted separately, in <strong>WHERE WAS THIS CONDUCTED?</strong>.</p>
<div id="threat-category-overlap" class="section level2">
<h2><span class="header-section-number">5.1</span> Threat Category Overlap</h2>
</div>
<div id="pie-charts" class="section level2">
<h2><span class="header-section-number">5.2</span> Pie Charts</h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">blank_theme &lt;-<span class="st"> </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb20-3" title="3">        <span class="dt">axis.title.y =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb20-4" title="4">        <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb20-5" title="5">        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb20-6" title="6">        <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb20-7" title="7">        <span class="dt">plot.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">14</span>, <span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</a></code></pre></div>
<div id="of-threats-within-threat-categories-number-of-grants-not" class="section level3">
<h3><span class="header-section-number">5.2.1</span> # of Threats within Threat categories (number of grants, not $)</h3>
<div id="climate" class="section level4">
<h4><span class="header-section-number">5.2.1.1</span> Climate</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">pie.Nthreats_climate &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="st">  </span><span class="kw">filter</span>(cat_threat_climate <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">as.factor</span>(Num.Thr)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalCount =</span> <span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalCount<span class="op">/</span><span class="kw">sum</span>(totalCount),</a>
<a class="sourceLine" id="cb21-9" title="9">         <span class="dt">alpha =</span> <span class="kw">seq</span>(<span class="fl">0.2</span>,<span class="dv">1</span>,<span class="fl">0.2</span>))</a>
<a class="sourceLine" id="cb21-10" title="10"></a>
<a class="sourceLine" id="cb21-11" title="11">plot.pie.Nthreats_climate &lt;-<span class="st"> </span><span class="kw">ggplot</span>(pie.Nthreats_climate,</a>
<a class="sourceLine" id="cb21-12" title="12">                       <span class="kw">aes</span>(<span class="dt">y =</span> perc, </a>
<a class="sourceLine" id="cb21-13" title="13">                           <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb21-14" title="14">                           <span class="dt">fill =</span> Num.Thr)) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-15" title="15"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-16" title="16"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb21-17" title="17"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">seq_gradient_pal</span>(cat_colors22[<span class="dv">1</span>], <span class="st">&quot;white&quot;</span>,</a>
<a class="sourceLine" id="cb21-18" title="18">                                              <span class="st">&quot;Lab&quot;</span>)(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">5</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-19" title="19"><span class="st">  </span><span class="co"># scale_fill_manual(values = c(&quot;#a50f15&quot;,&quot;#de2d26&quot;,&quot;#fb6a4a&quot;,&quot;#fcae91&quot;,&quot;#fee5d9&quot;)) +</span></a>
<a class="sourceLine" id="cb21-20" title="20"><span class="st">  </span><span class="co"># scale_fill_viridis_d(name = &quot;Number of Threats&quot;, option = &quot;D&quot;) +</span></a>
<a class="sourceLine" id="cb21-21" title="21"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Proportion of Climate Change Grants Classified into Multiple Threats&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-22" title="22"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">start=</span><span class="dv">0</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-23" title="23"><span class="st">  </span>blank_theme <span class="op">+</span></a>
<a class="sourceLine" id="cb21-24" title="24"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-25" title="25"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="fl">1.55</span>,<span class="dv">4</span>), <span class="fl">1.65</span>),</a>
<a class="sourceLine" id="cb21-26" title="26">                <span class="dt">label =</span> <span class="kw">paste0</span>(<span class="kw">round</span>(perc<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)),</a>
<a class="sourceLine" id="cb21-27" title="27">            <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb21-28" title="28">            <span class="dt">size =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb21-29" title="29">            <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>)</a>
<a class="sourceLine" id="cb21-30" title="30"></a>
<a class="sourceLine" id="cb21-31" title="31"><span class="co"># ggsave(plot.pie.Nthreats_climate, filename = &quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/pie_Nthreats_climate.png&quot;, width=12, height=7,dpi = 300)</span></a>
<a class="sourceLine" id="cb21-32" title="32"></a>
<a class="sourceLine" id="cb21-33" title="33">plot.pie.Nthreats_climate</a></code></pre></div>
</div>
<div id="energytransportation" class="section level4">
<h4><span class="header-section-number">5.2.1.2</span> Energy/Transportation</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">pie.Nthreats_energytransport &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="st">  </span><span class="kw">filter</span>(cat_threat_energytransport <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">as.factor</span>(Num.Thr)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalCount =</span> <span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalCount<span class="op">/</span><span class="kw">sum</span>(totalCount))</a>
<a class="sourceLine" id="cb22-9" title="9"></a>
<a class="sourceLine" id="cb22-10" title="10">plot.pie.Nthreats_energytransport &lt;-<span class="st"> </span><span class="kw">ggplot</span>(pie.Nthreats_energytransport,</a>
<a class="sourceLine" id="cb22-11" title="11">                       <span class="kw">aes</span>(<span class="dt">y =</span> perc, </a>
<a class="sourceLine" id="cb22-12" title="12">                           <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb22-13" title="13">                           <span class="dt">fill =</span> Num.Thr)) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-14" title="14"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-15" title="15"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb22-16" title="16"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">seq_gradient_pal</span>(cat_colors22[<span class="dv">13</span>], <span class="st">&quot;white&quot;</span>,</a>
<a class="sourceLine" id="cb22-17" title="17">                                              <span class="st">&quot;Lab&quot;</span>)(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">5</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-18" title="18"><span class="st">  </span><span class="co"># scale_fill_viridis_d(name = &quot;Number of Threats&quot;) +</span></a>
<a class="sourceLine" id="cb22-19" title="19"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Proportion of Energy/Transportation Grants Classified into Multiple Threats&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-20" title="20"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">start=</span><span class="dv">0</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-21" title="21"><span class="st">  </span>blank_theme <span class="op">+</span></a>
<a class="sourceLine" id="cb22-22" title="22"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-23" title="23"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="fl">1.55</span>,<span class="dv">4</span>), <span class="fl">1.65</span>),</a>
<a class="sourceLine" id="cb22-24" title="24">                <span class="dt">label =</span> <span class="kw">paste0</span>(<span class="kw">round</span>(perc<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)),</a>
<a class="sourceLine" id="cb22-25" title="25">            <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb22-26" title="26">            <span class="dt">size =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb22-27" title="27">            <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>)</a>
<a class="sourceLine" id="cb22-28" title="28"></a>
<a class="sourceLine" id="cb22-29" title="29"><span class="co"># ggsave(plot.pie.Nthreats_energytransport, filename = &quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/pie_Nthreats_energytransport.png&quot;, width=12, height=7,dpi = 300)</span></a>
<a class="sourceLine" id="cb22-30" title="30"></a>
<a class="sourceLine" id="cb22-31" title="31">plot.pie.Nthreats_energytransport</a></code></pre></div>
</div>
<div id="habitat-loss" class="section level4">
<h4><span class="header-section-number">5.2.1.3</span> Habitat Loss</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">pie.Nthreats_habitat &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">  </span><span class="kw">filter</span>(cat_threat_habitat <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">as.factor</span>(Num.Thr)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalCount =</span> <span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalCount<span class="op">/</span><span class="kw">sum</span>(totalCount))</a>
<a class="sourceLine" id="cb23-9" title="9"></a>
<a class="sourceLine" id="cb23-10" title="10">plot.pie.Nthreats_habitat &lt;-<span class="st"> </span><span class="kw">ggplot</span>(pie.Nthreats_habitat,</a>
<a class="sourceLine" id="cb23-11" title="11">                       <span class="kw">aes</span>(<span class="dt">y =</span> perc, </a>
<a class="sourceLine" id="cb23-12" title="12">                           <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb23-13" title="13">                           <span class="dt">fill =</span> Num.Thr)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-14" title="14"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-15" title="15"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb23-16" title="16"><span class="st">    </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">seq_gradient_pal</span>(cat_colors22[<span class="dv">11</span>], <span class="st">&quot;white&quot;</span>,</a>
<a class="sourceLine" id="cb23-17" title="17">                                              <span class="st">&quot;Lab&quot;</span>)(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">5</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-18" title="18"><span class="st">  </span><span class="co"># scale_fill_viridis_d(name = &quot;Number of Threats&quot;, end = 0.8) +</span></a>
<a class="sourceLine" id="cb23-19" title="19"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Proportion of Habitat Loss Grants Classified into Multiple Threats&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-20" title="20"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">start=</span><span class="dv">0</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-21" title="21"><span class="st">  </span>blank_theme <span class="op">+</span></a>
<a class="sourceLine" id="cb23-22" title="22"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-23" title="23"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="fl">1.55</span>,<span class="dv">4</span>)),</a>
<a class="sourceLine" id="cb23-24" title="24">                <span class="dt">label =</span> <span class="kw">paste0</span>(<span class="kw">round</span>(perc<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)),</a>
<a class="sourceLine" id="cb23-25" title="25">            <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb23-26" title="26">            <span class="dt">size =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb23-27" title="27">            <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>)</a>
<a class="sourceLine" id="cb23-28" title="28"></a>
<a class="sourceLine" id="cb23-29" title="29"><span class="kw">ggsave</span>(plot.pie.Nthreats_habitat, <span class="dt">filename =</span> <span class="st">&quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/pie_Nthreats_habitat.png&quot;</span>, <span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>,<span class="dt">dpi =</span> <span class="dv">300</span>)</a>
<a class="sourceLine" id="cb23-30" title="30"></a>
<a class="sourceLine" id="cb23-31" title="31">plot.pie.Nthreats_habitat</a></code></pre></div>
</div>
<div id="invasive-species" class="section level4">
<h4><span class="header-section-number">5.2.1.4</span> Invasive Species</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">pie.Nthreats_inv_spec &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="st">  </span><span class="kw">filter</span>(cat_threat_inv_spec <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">as.factor</span>(Num.Thr)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalCount =</span> <span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalCount<span class="op">/</span><span class="kw">sum</span>(totalCount))</a>
<a class="sourceLine" id="cb24-9" title="9"></a>
<a class="sourceLine" id="cb24-10" title="10">plot.pie.Nthreats_inv_spec &lt;-<span class="st"> </span><span class="kw">ggplot</span>(pie.Nthreats_inv_spec,</a>
<a class="sourceLine" id="cb24-11" title="11">                       <span class="kw">aes</span>(<span class="dt">y =</span> perc, </a>
<a class="sourceLine" id="cb24-12" title="12">                           <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb24-13" title="13">                           <span class="dt">fill =</span> Num.Thr)) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-14" title="14"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-15" title="15"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb24-16" title="16"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">seq_gradient_pal</span>(cat_colors22[<span class="dv">20</span>], <span class="st">&quot;white&quot;</span>,</a>
<a class="sourceLine" id="cb24-17" title="17">                                              <span class="st">&quot;Lab&quot;</span>)(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">5</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-18" title="18"><span class="st">  </span><span class="co"># scale_fill_viridis_d(name = &quot;Number of Threats&quot;) +</span></a>
<a class="sourceLine" id="cb24-19" title="19"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Proportion of Invasive Species Grants Classified into Multiple Threats&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-20" title="20"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">start=</span><span class="dv">0</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-21" title="21"><span class="st">  </span>blank_theme <span class="op">+</span></a>
<a class="sourceLine" id="cb24-22" title="22"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-23" title="23"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="fl">1.55</span>,<span class="dv">4</span>), <span class="fl">1.65</span>),</a>
<a class="sourceLine" id="cb24-24" title="24">                <span class="dt">label =</span> <span class="kw">paste0</span>(<span class="kw">round</span>(perc<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)),</a>
<a class="sourceLine" id="cb24-25" title="25">            <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb24-26" title="26">            <span class="dt">size =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb24-27" title="27">            <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>)</a>
<a class="sourceLine" id="cb24-28" title="28"></a>
<a class="sourceLine" id="cb24-29" title="29"><span class="kw">ggsave</span>(plot.pie.Nthreats_inv_spec, <span class="dt">filename =</span> <span class="st">&quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/pie_Nthreats_inv_spec.png&quot;</span>, <span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>,<span class="dt">dpi =</span> <span class="dv">300</span>)</a>
<a class="sourceLine" id="cb24-30" title="30"></a>
<a class="sourceLine" id="cb24-31" title="31">plot.pie.Nthreats_inv_spec</a></code></pre></div>
</div>
<div id="overexploitation" class="section level4">
<h4><span class="header-section-number">5.2.1.5</span> Overexploitation</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1">pie.Nthreats_overexp &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="st">  </span><span class="kw">filter</span>(cat_threat_overexp <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">as.factor</span>(Num.Thr)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalCount =</span> <span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalCount<span class="op">/</span><span class="kw">sum</span>(totalCount))</a>
<a class="sourceLine" id="cb25-9" title="9"></a>
<a class="sourceLine" id="cb25-10" title="10">plot.pie.Nthreats_overexp &lt;-<span class="st"> </span><span class="kw">ggplot</span>(pie.Nthreats_overexp,</a>
<a class="sourceLine" id="cb25-11" title="11">                       <span class="kw">aes</span>(<span class="dt">y =</span> perc, </a>
<a class="sourceLine" id="cb25-12" title="12">                           <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb25-13" title="13">                           <span class="dt">fill =</span> Num.Thr)) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-14" title="14"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-15" title="15"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb25-16" title="16"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">seq_gradient_pal</span>(cat_colors22[<span class="dv">5</span>], <span class="st">&quot;white&quot;</span>,</a>
<a class="sourceLine" id="cb25-17" title="17">                                              <span class="st">&quot;Lab&quot;</span>)(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">5</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-18" title="18"><span class="st">  </span><span class="co"># scale_fill_viridis_d(name = &quot;Number of Threats&quot;) +</span></a>
<a class="sourceLine" id="cb25-19" title="19"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Proportion of Overexploitation Grants Classified into Multiple Threats&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-20" title="20"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">start=</span><span class="dv">0</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-21" title="21"><span class="st">  </span>blank_theme <span class="op">+</span></a>
<a class="sourceLine" id="cb25-22" title="22"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-23" title="23"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="fl">1.55</span>,<span class="dv">4</span>), <span class="fl">1.65</span>),</a>
<a class="sourceLine" id="cb25-24" title="24">                <span class="co"># label = paste0(round(perc*100,1), &quot;%&quot;)),</span></a>
<a class="sourceLine" id="cb25-25" title="25">                <span class="dt">label =</span> <span class="kw">str_glue</span>(<span class="st">&quot;{round(perc*100,1)}% ({totalCount})&quot;</span>)),</a>
<a class="sourceLine" id="cb25-26" title="26">            <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb25-27" title="27">            <span class="dt">size =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb25-28" title="28">            <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>)</a>
<a class="sourceLine" id="cb25-29" title="29"></a>
<a class="sourceLine" id="cb25-30" title="30"><span class="kw">ggsave</span>(plot.pie.Nthreats_overexp, <span class="dt">filename =</span> <span class="st">&quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/pie_Nthreats_overexp.png&quot;</span>, <span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>,<span class="dt">dpi =</span> <span class="dv">300</span>)</a>
<a class="sourceLine" id="cb25-31" title="31"></a>
<a class="sourceLine" id="cb25-32" title="32">plot.pie.Nthreats_overexp</a></code></pre></div>
<div id="prop-overxploitation-funding" class="section level5">
<h5><span class="header-section-number">5.2.1.5.1</span> Prop Overxploitation funding</h5>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">pie.threats_overexp &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="st">  </span><span class="kw">filter</span>(cat_threat_overexp <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Num.Thr, cat_threat_overexp) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="st">  </span><span class="kw">group_by</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">total =</span> <span class="kw">sum</span>(cat_threat_overexp)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-6" title="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> total<span class="op">/</span><span class="kw">sum</span>(total))</a></code></pre></div>
</div>
</div>
<div id="pollution" class="section level4">
<h4><span class="header-section-number">5.2.1.6</span> Pollution</h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1">pie.Nthreats_pollution &lt;-<span class="st"> </span>money.data.multi_bio <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="st">  </span><span class="kw">filter</span>(cat_threat_pollution <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Num.Thr =</span> <span class="kw">as.factor</span>(Num.Thr)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Count =</span> <span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-6" title="6"><span class="st">  </span><span class="kw">group_by</span>(Num.Thr) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-7" title="7"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">totalCount =</span> <span class="kw">sum</span>(Count)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> totalCount<span class="op">/</span><span class="kw">sum</span>(totalCount))</a>
<a class="sourceLine" id="cb27-9" title="9"></a>
<a class="sourceLine" id="cb27-10" title="10">plot.pie.Nthreats_pollution &lt;-<span class="st"> </span><span class="kw">ggplot</span>(pie.Nthreats_pollution,</a>
<a class="sourceLine" id="cb27-11" title="11">                       <span class="kw">aes</span>(<span class="dt">y =</span> perc, </a>
<a class="sourceLine" id="cb27-12" title="12">                           <span class="dt">x =</span> <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb27-13" title="13">                           <span class="dt">fill =</span> Num.Thr)) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-14" title="14"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-15" title="15"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb27-16" title="16"><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">seq_gradient_pal</span>(cat_colors22[<span class="dv">18</span>], <span class="st">&quot;white&quot;</span>,</a>
<a class="sourceLine" id="cb27-17" title="17">                                              <span class="st">&quot;Lab&quot;</span>)(<span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="dt">length.out =</span> <span class="dv">5</span>))) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-18" title="18"><span class="st">  </span><span class="co"># scale_fill_viridis_d(name = &quot;Number of Threats&quot;) +</span></a>
<a class="sourceLine" id="cb27-19" title="19"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Proportion of Pollution Funding Classified into Multiple Threats&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-20" title="20"><span class="st">  </span><span class="kw">coord_polar</span>(<span class="st">&quot;y&quot;</span>, <span class="dt">start=</span><span class="dv">0</span>, <span class="dt">direction =</span> <span class="dv">-1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-21" title="21"><span class="st">  </span>blank_theme <span class="op">+</span></a>
<a class="sourceLine" id="cb27-22" title="22"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-23" title="23"><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="fl">1.55</span>,<span class="dv">4</span>), <span class="fl">1.65</span>),</a>
<a class="sourceLine" id="cb27-24" title="24">                <span class="dt">label =</span> <span class="kw">paste0</span>(<span class="kw">round</span>(perc<span class="op">*</span><span class="dv">100</span>,<span class="dv">1</span>), <span class="st">&quot;%&quot;</span>)),</a>
<a class="sourceLine" id="cb27-25" title="25">            <span class="dt">position =</span> <span class="kw">position_stack</span>(<span class="dt">vjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb27-26" title="26">            <span class="dt">size =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb27-27" title="27">            <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>)</a>
<a class="sourceLine" id="cb27-28" title="28"></a>
<a class="sourceLine" id="cb27-29" title="29"><span class="kw">ggsave</span>(plot.pie.Nthreats_pollution, <span class="dt">filename =</span> <span class="st">&quot;~/Columbia E3B/Conservation Group/Output V15.2/Figures/pie_Nthreats_pollution.png&quot;</span>, <span class="dt">width=</span><span class="dv">12</span>, <span class="dt">height=</span><span class="dv">7</span>,<span class="dt">dpi =</span> <span class="dv">300</span>)</a>
<a class="sourceLine" id="cb27-30" title="30"></a>
<a class="sourceLine" id="cb27-31" title="31">plot.pie.Nthreats_pollution</a></code></pre></div>
</div>
</div>
</div>
<div id="supplemental-figures" class="section level2">
<h2><span class="header-section-number">5.3</span> Supplemental Figures</h2>
<div id="figure-s1-total-biodiversityclimate-change-grantmaking-by-top-1000-grantmakers" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Figure S1: Total Biodiversity/Climate Change Grantmaking by Top 1000 Grantmakers</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">donor_Rank &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;Top 50&quot;</span>, <span class="st">&quot;Top 100&quot;</span>, <span class="st">&quot;Top 200&quot;</span>, <span class="st">&quot;Top 300&quot;</span>, <span class="st">&quot;Top 400&quot;</span>, <span class="st">&quot;Top 500&quot;</span>, <span class="st">&quot;Top 600&quot;</span>, <span class="st">&quot;Top 700&quot;</span>, <span class="st">&quot;Top 800&quot;</span>, <span class="st">&quot;Top 900&quot;</span>, <span class="st">&quot;Top 1000&quot;</span>)</a>
<a class="sourceLine" id="cb28-2" title="2">sum &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">14396513202</span>, <span class="dv">16440571398</span>, <span class="dv">18171144637</span>, <span class="dv">18975986509</span>, <span class="dv">19490663536</span>, <span class="dv">19851261916</span>, <span class="dv">20128241008</span>, <span class="dv">20348022885</span>, <span class="dv">20525790876</span>, <span class="dv">20670921174</span>, <span class="dv">20793224389</span>)</a>
<a class="sourceLine" id="cb28-3" title="3">sum_mildiv &lt;-<span class="st"> </span>sum<span class="op">/</span><span class="dv">1000000</span></a>
<a class="sourceLine" id="cb28-4" title="4">axis_Order &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>)</a>
<a class="sourceLine" id="cb28-5" title="5"></a>
<a class="sourceLine" id="cb28-6" title="6">sum.data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(donor_Rank, sum, sum_mildiv, axis_Order)</a>
<a class="sourceLine" id="cb28-7" title="7"></a>
<a class="sourceLine" id="cb28-8" title="8">sum_graph &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> sum.data,</a>
<a class="sourceLine" id="cb28-9" title="9">                    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> axis_Order,</a>
<a class="sourceLine" id="cb28-10" title="10">                                  <span class="dt">y =</span>  sum_mildiv,</a>
<a class="sourceLine" id="cb28-11" title="11">                                  <span class="dt">group =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb28-12" title="12">) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-13" title="13"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb28-14" title="14"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb28-15" title="15"><span class="st">  </span><span class="kw">geom_area</span>(<span class="kw">aes</span>(<span class="dt">y=</span><span class="kw">ifelse</span>(sum_mildiv<span class="op">&gt;=</span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>sum_mildiv<span class="op">&lt;</span><span class="st"> </span><span class="fl">19851.26</span>, sum_mildiv, <span class="fl">19851.26</span>)), <span class="dt">fill=</span><span class="st">&quot;#696969&quot;</span>, <span class="dt">alpha =</span> <span class="fl">.4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-16" title="16"><span class="st">  </span><span class="kw">ylim</span>(<span class="dv">0</span>, <span class="dv">21500</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-17" title="17"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb28-18" title="18"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Grantmaker Group&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-19" title="19"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Sum ($1,000,000USD)&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-20" title="20"><span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;Top 50&quot;</span>, <span class="st">&quot;Top 100&quot;</span>, <span class="st">&quot;Top 200&quot;</span>, <span class="st">&quot;Top 300&quot;</span>, <span class="st">&quot;Top 400&quot;</span>, <span class="st">&quot;Top 500&quot;</span>, <span class="st">&quot;Top 600&quot;</span>, </a>
<a class="sourceLine" id="cb28-21" title="21">                                      <span class="st">&quot;Top 700&quot;</span>, <span class="st">&quot;Top 800&quot;</span>, <span class="st">&quot;Top 900&quot;</span>, <span class="st">&quot;Top 1000&quot;</span>))</a>
<a class="sourceLine" id="cb28-22" title="22"></a>
<a class="sourceLine" id="cb28-23" title="23">sum_graph</a></code></pre></div>
<!--chapter:end:04-dataVis.Rmd-->
</div>
</div>
</div>
<div id="rbc" class="section level1">
<h1><span class="header-section-number">6</span> Rule Based Classification</h1>
<p>Pending, from Pratik</p>
<!--chapter:end:05-ruleBasedClassification.Rmd-->
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

</body>

</html>
